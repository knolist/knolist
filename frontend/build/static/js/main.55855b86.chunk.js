(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,a){e.exports=a.p+"static/media/horizontal_main.7429f5ff.png"},289:function(e,t,a){e.exports=a(480)},479:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(50),s=a.n(o),l=a(25),i=a(16),c=a(20),u=a(103),d=a.n(u),m=a(483),p=a(285),h=a(31);var f=function(e){return n.a.createElement(m.a,{style:{width:e.width}},n.a.createElement(p.a,{placeholder:"Search through your project",value:e.searchQuery,onInput:function(t){return e.setSearchQuery(t.target.value)}}),n.a.createElement(m.a.Button,null,n.a.createElement(h.a,{icon:"search"})))},g=a(484),E=a(502),w=a(494),v=a(80);var y=function(e){var t=Object(v.b)().logout;return e.showSearch?n.a.createElement(g.a,{style:{padding:"0 10px",borderBottom:".1px solid #ededf0"}},n.a.createElement(E.a,{justify:"space-between",align:"middle"},n.a.createElement(l.b,{to:"/my-projects"},n.a.createElement(g.a.Header,null,n.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),n.a.createElement(E.a.Item,{colspan:13},n.a.createElement(E.a,null,n.a.createElement(E.a.Item,null,n.a.createElement(f,{width:"40vw",setSearchQuery:e.setSearchQuery})),n.a.createElement(E.a.Item,null,n.a.createElement(w.a,{title:"Sort by: "+e.sortCriterion,activeKey:e.sortCriterion},n.a.createElement(w.a.Item,{eventKey:"Newest",onSelect:function(){return e.setSortCriterion("Newest")}},"Newest"),n.a.createElement(w.a.Item,{eventKey:"Oldest",onSelect:function(){return e.setSortCriterion("Oldest")}},"Oldest"),n.a.createElement(w.a.Item,{eventKey:"A-Z",onSelect:function(){return e.setSortCriterion("A-Z")}},"A-Z"),n.a.createElement(w.a.Item,{eventKey:"Z-A",onSelect:function(){return e.setSortCriterion("Z-A")}},"Z-A"))))),n.a.createElement(E.a.Item,null,n.a.createElement(w.a,{noCaret:!0,icon:n.a.createElement(h.a,{icon:"user",size:"lg"}),placement:"bottomEnd"},n.a.createElement(l.b,{to:"/settings"},n.a.createElement(w.a.Item,{componentClass:"span",className:"react-router-styling"},"Settings")),n.a.createElement(w.a.Item,{onClick:function(){localStorage.removeItem("curProject"),t({returnTo:window.location.origin})}},"Log out"))))):n.a.createElement(g.a,{style:{padding:"0 10px",borderBottom:".1px solid #ededf0"}},n.a.createElement(E.a,{justify:"space-between",align:"middle"},n.a.createElement(l.b,{to:"/my-projects"},n.a.createElement(g.a.Header,null,n.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),n.a.createElement(E.a.Item,null,n.a.createElement(w.a,{noCaret:!0,icon:n.a.createElement(h.a,{icon:"user",size:"lg"}),placement:"bottomEnd"},n.a.createElement(l.b,{to:"/settings"},n.a.createElement(w.a.Item,{componentClass:"span"},"Settings")),n.a.createElement(w.a.Item,{onClick:function(){t({returnTo:window.location.origin})}},"Log out")))))},b=a(486),C=a(496);var j=function(){var e=!1,t=!1,a=!1,r=Object(i.g)().pathname;return"/my-projects"===r?e=!0:"/shared"===r?t=!0:"/archived"===r&&(a=!0),n.a.createElement("div",{style:{width:"17vw"}},n.a.createElement(b.a,{style:{height:"100vh",fontFamily:"Poppins",paddingTop:"3vh",paddingLeft:"1vh"}},n.a.createElement(b.a.Body,null,n.a.createElement(C.a,null,n.a.createElement(l.b,{to:"/my-projects",className:"react-router-styling"},n.a.createElement(C.a.Item,{active:e,icon:n.a.createElement(h.a,{icon:"project"}),componentClass:"span"},"My Projects")),n.a.createElement(l.b,{to:"/shared",className:"react-router-styling"},n.a.createElement(C.a.Item,{active:t,icon:n.a.createElement(h.a,{icon:"people-group"}),componentClass:"span"},"Shared with me")),n.a.createElement(l.b,{to:"/archived",className:"react-router-styling"},n.a.createElement(C.a.Item,{active:a,icon:n.a.createElement(h.a,{icon:"archive"}),componentClass:"span"},"Archived"))))))},S=a(504),I=a(503);var N=function(e){var t=function(e){localStorage.setItem("curProject",JSON.stringify(e))},a="";null!=e.data.description&&(a=n.a.createElement("p",null," ",e.data.description," "));var r=[];return void 0!==e.stats&&(void 0!==e.stats.counts.num_items&&r.push(n.a.createElement("p",{key:"num_items"}," ",e.stats.counts.num_items.toString()," total items ")),void 0!==e.stats.average_depth_per_item&&r.push(n.a.createElement("p",{key:"avg_depth"}," Average depth of ",e.stats.average_depth_per_item," ")),void 0!==e.stats.date_accessed&&r.push(n.a.createElement("p",{key:"date_accessed"}," Last edit was ",e.stats.date_accessed)),void 0!==e.stats.date_created&&r.push(n.a.createElement("p",{key:"date_created"}," Project created on ",e.stats.date_created)),void 0!==e.stats.max_depth&&r.push(n.a.createElement("p",{key:"max_depth"}," Max depth of ",e.stats.max_depth)),void 0!==e.stats.most_common&&r.push(n.a.createElement("p",{key:"most_common"}," Most common item is ",e.stats.most_common))),e.data.shared_users.length>0?n.a.createElement(l.b,{to:"/",style:{textDecoration:"none",paddingRight:"5vh"},className:"react-router-styling"},n.a.createElement(I.a,{shaded:!0,bordered:!0,header:e.data.title,style:{marginTop:"2vh"},onClick:function(){return t(e.data)},collapsible:!0},e.data.id,n.a.createElement(h.a,{icon:"people-group",style:{float:"right",marginTop:"5px"}}))):n.a.createElement(I.a,{shaded:!0,bordered:!0,header:n.a.createElement(l.b,{to:"/",style:{textDecoration:"none",paddingRight:"5vh"},className:"react-router-styling"},e.data.title),style:{marginTop:"2vh"},onClick:function(){return t(e.data)},collapsible:!0},a?n.a.createElement(n.a.Fragment,null," ",n.a.createElement("b",null,"Description")," ",a," ",n.a.createElement("br",null)," "):null,n.a.createElement("b",null," Statistics "),r)};var k=function(e){return e.show&&e.projects.length>0?n.a.createElement("div",null,n.a.createElement("div",{className:"myknolist-title"},"Recent"),n.a.createElement("div",{className:"myknolist-container"},n.a.createElement(E.a,{style:{marginLeft:"-6px",marginBottom:"5vh"},justify:"start"},function(e){e.sort((function(e,t){return Date.parse(t.recent_access_date)-Date.parse(e.recent_access_date)}));for(var t=[],a=e.length>=4?4:e.length,r=0;r<a;r++)t.push(e[r]);return t}(e.projects).map((function(t,a){return n.a.createElement(E.a.Item,{componentClass:S.a,md:6,key:a},n.a.createElement(N,{data:t,stats:e.stats[a]}))}))))):null};var P=function(e){var t=function(t){var a=null;if(e.sharedOnly||e.archivedOnly){if(e.sharedOnly)a=t.filter((function(e){return e.shared_users.length>0}));else if(e.archivedOnly)return[]}else a=t;if(""!==e.searchQuery){for(var r=[],n=0;n<a.length;n++)a[n].title.toLowerCase().includes(e.searchQuery.toLowerCase())&&r.push(a[n]);a=r}switch(e.sortCriterion){case"Oldest":a.sort((function(e,t){return Date.parse(e.creation_date)-Date.parse(t.creation_date)}));break;case"Newest":a.sort((function(e,t){return Date.parse(t.creation_date)-Date.parse(e.creation_date)}));break;case"A-Z":a.sort((function(e,t){return e.title.localeCompare(t.title)}));break;case"Z-A":a.sort((function(e,t){return t.title.localeCompare(e.title)}))}return a}(e.projects);return t.length>0?n.a.createElement("div",null,n.a.createElement("div",{className:"myknolist-title"},"All"),n.a.createElement("div",{className:"myknolist-container"},n.a.createElement(E.a,{style:{marginLeft:"-6px",marginBottom:"5vh"},justify:"start"},t.map((function(t,a){var r=e.stats[a];return n.a.createElement(E.a.Item,{componentClass:S.a,md:6,key:a},n.a.createElement(N,{data:t,stats:r}))}))))):0===t.length&&""===e.searchQuery?n.a.createElement("div",null,n.a.createElement("div",{style:{fontWeight:"bold",fontSize:"2em",fontFamily:"Poppins"}},"No projects!"),n.a.createElement("div",{style:{fontSize:"1em",fontFamily:"Poppins",marginTop:"15px"}},"Add a new project to get started.")):n.a.createElement("div",{className:"myknolist-title"},"All")},O=a(286);var D=function(){return n.a.createElement(O.a,{className:"footer-btn",appearance:"primary",icon:n.a.createElement(h.a,{icon:"plus"}),circle:!0,size:"lg"})},F=a(27),T=a.n(F),x=a(48),M=a(265),A=null,_="https://app.knolist.com";function L(e,t,a){var r=e+"?query="+t;return 0!==a.length&&a.forEach((function(e){"Page Content"===e&&(e="content"),r=r+"&filter="+e.toLowerCase()})),r}function B(){return(B=Object(x.a)(T.a.mark((function e(t){var a,r,n,o,s,l,i,c,u,d,m=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:"GET",r=m.length>2&&void 0!==m[2]?m[2]:{},e.next=4,Object(M.a)({domain:"knolist.us.auth0.com",client_id:"pBu5uP4mKTQgBttTW13N0wCVgsx90KMi",audience:"knolist"});case 4:return A=e.sent,e.next=7,A.getTokenSilently();case 7:return n=e.sent,o=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),s=o&&-1!==navigator.userAgent.indexOf("Edg"),o&&!s?chrome.runtime.sendMessage("ljjgadmlbbmcmbmgapjjklbnlliedefc",{jwt:n},(function(e){console.log("got response "+e)})):console.log("Not Chrome"),l=_+t,(i={}).headers={Authorization:"Bearer "+n},Object.keys(r).length>0&&(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(r)),"GET"!==a&&(i.method=a),e.next=18,fetch(l,i);case 18:return c=e.sent,u=c.status,e.next=22,c.json();case 22:return d=e.sent,e.abrupt("return",{status:u,body:d});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){return B.apply(this,arguments)},R=a(497),V=a(487),U=a(505),z=a(488),Q=a(506),G=a(498),W=a(507),K=a(51);var q=function(e){var t=e.show,a=e.setShow,o=Object(i.f)(),s=Object(r.useState)(!1),l=Object(c.a)(s,2),u=l[0],d=l[1],m=function(){return e.noCancel?R.a.error("Please create a project!"):a(!1)};return n.a.createElement(V.a,{show:t,style:{overflow:"hidden"},onHide:m},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"New Project")),n.a.createElement(V.a.Body,null,n.a.createElement(U.a,{fluid:!0},n.a.createElement(z.a,{controlId:"titleInput"},n.a.createElement(Q.a,null,"Title"),n.a.createElement(G.a,{name:"title"}),n.a.createElement(W.a,null,"Required")),n.a.createElement(z.a,{controlId:"descriptionInput"},n.a.createElement(Q.a,null,"Description"),n.a.createElement(G.a,{rows:5,name:"description",componentClass:"textarea"})))),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{onClick:function(){d(!0),function(){var t=document.getElementById("titleInput").value,r=document.getElementById("descriptionInput").value;if(0===t.length)return d(!1),void R.a.error("Title is required!",2e3);H("/projects","POST",null==r||""===r?{title:t}:{title:t,description:r}).then((function(t){localStorage.setItem("curProject",JSON.stringify(t.body.project)),a(!1),e.fromSidebar?o.go(0):o.push("/")}))}()},appearance:"primary",loading:u},"Create"),n.a.createElement(K.a,{onClick:m,appearance:"default"},"Cancel")))},J=a(508);var Y=function(e){var t=Object(r.useState)(!1),a=Object(c.a)(t,2),o=a[0],s=a[1],l=Object(r.useState)(null),i=Object(c.a)(l,2),u=i[0],d=i[1],m=Object(r.useState)(!1),p=Object(c.a)(m,2),h=p[0],f=p[1],g=Object(r.useState)(null),E=Object(c.a)(g,2),w=E[0],v=E[1];return Object(r.useEffect)((function(){h||(H("/projects").then((function(e){return d(e.body.projects)})),H("/projects/statistics").then((function(e){return v(e.body.stats)})),f(!0))})),null!==u&&null!==w?n.a.createElement("div",{id:"myknolist-main-container"},n.a.createElement(k,{show:e.showRecent,projects:u,stats:w}),n.a.createElement(P,{projects:u,sharedOnly:e.sharedOnly,archivedOnly:e.archivedOnly,sortCriterion:e.sortCriterion,searchQuery:e.searchQuery,stats:w}),n.a.createElement("div",{style:{position:"fixed",right:0,bottom:0},onClick:function(){return s(!0)}},n.a.createElement(D,null)),n.a.createElement(q,{show:o,setShow:s,fromSidebar:!1})):n.a.createElement(J.a,{size:"lg",center:!0})};var Z=function(e){var t=!1,a=!1,o=!1;"/my-projects"===e.url&&(t=!0),"/shared"===e.url&&(a=!0),"/archived"===e.url&&(o=!0);var s=Object(r.useState)(""),l=Object(c.a)(s,2),i=l[0],u=l[1],d=Object(r.useState)(""),m=Object(c.a)(d,2),p=m[0],h=m[1];return""!==p&&(t=!1),n.a.createElement("div",null,n.a.createElement(y,{setSortCriterion:u,sortCriterion:i,setSearchQuery:h,showSearch:!0}),n.a.createElement(j,null),n.a.createElement(Y,{showRecent:t,sharedOnly:a,archivedOnly:o,sortCriterion:i,searchQuery:p}))},X=a(509),$=a(510),ee=a(287),te=a(511);var ae=function(){var e=Object(r.useState)("Medium"),t=Object(c.a)(e,2),a=t[0],o=t[1];return n.a.createElement("div",null,n.a.createElement(y,{showSearch:!1}),n.a.createElement(j,null),n.a.createElement("div",{id:"myknolist-main-container"},n.a.createElement("div",{style:{width:"50%"}},n.a.createElement(X.a,null,n.a.createElement($.a,null,n.a.createElement(S.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Full Name"),n.a.createElement(S.a,{xs:6},n.a.createElement(p.a,{placeholder:"John Doe"}))),n.a.createElement($.a,{style:{marginTop:"2vh"}},n.a.createElement(S.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Email"),n.a.createElement(S.a,{xs:6},n.a.createElement(p.a,{placeholder:"johndoe@gmail.com"}))),n.a.createElement($.a,{style:{marginTop:"2vh"}},n.a.createElement(S.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Password"),n.a.createElement(S.a,{xs:6},n.a.createElement(K.a,{appearance:"default",size:"sm"},"Change"))),n.a.createElement(ee.a,null),n.a.createElement($.a,{style:{marginTop:"2vh"}},n.a.createElement(S.a,{xs:2,style:{paddingTop:".5vh",fontWeight:"bold"}},"Dark Mode"),n.a.createElement(S.a,{xs:6},n.a.createElement(te.a,null))),n.a.createElement($.a,{style:{marginTop:"2vh"}},n.a.createElement(S.a,{xs:2,style:{paddingTop:"1.1vh",fontWeight:"bold"}},"Text Size"),n.a.createElement(S.a,{xs:6},n.a.createElement(w.a,{title:a,appearance:"default"},n.a.createElement(w.a.Item,{onSelect:function(){return o("Small")}},"Small"),n.a.createElement(w.a.Item,{onSelect:function(){return o("Medium")}},"Medium"),n.a.createElement(w.a.Item,{onSelect:function(){return o("Large")}},"Large"))))),n.a.createElement(K.a,{style:{marginTop:"4vh"},appearance:"primary"},"Save"))))},re=a(10),ne=a(11),oe=a(13),se=a(12),le=a(132),ie=a(152),ce=a(500),ue=a(489);var de=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(E.a.Item,null,n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Bibliography"),placement:"bottomEnd"},n.a.createElement(O.a,{onClick:function(){return e.props.setShowBib(!0)},icon:n.a.createElement(h.a,{icon:"book"})})))}}]),a}(n.a.Component),me=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;Object(re.a)(this,a),(r=t.call(this,e)).handleCheckAll=function(e,t){var a=t?r.state.filterCategories:[];r.setState({value:a,indeterminate:!1,checkAll:t}),r.sendFilters(a)},r.handleChange=function(e){r.setState({value:e,indeterminate:e.length>0&&e.length<r.state.filterCategories.length,checkAll:e.length===r.state.filterCategories.length}),r.sendFilters(e)},r.sendFilters=function(e){r.props.updateFilters(e)};var n=["Title","URL","Page Content","Highlights","Notes"];return r.state={indeterminate:!1,checkAll:!0,value:n,filterCategories:n},r}return Object(ne.a)(a,[{key:"render",value:function(){return n.a.createElement(E.a,null,n.a.createElement(E.a.Item,null,n.a.createElement(f,{width:250,searchQuery:this.props.searchQuery,setSearchQuery:this.props.setSearchQuery,updateFilters:this.props.updateFilters})),n.a.createElement(E.a.Item,null,n.a.createElement(pe,{indeterminate:this.state.indeterminate,checkAll:this.state.checkAll,value:this.state.value,filterCategories:this.state.filterCategories,handleCheckAll:this.handleCheckAll,handleChange:this.handleChange})))}}]),a}(n.a.Component);function pe(e){return n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Search Filters"),placement:"bottomEnd"},n.a.createElement(w.a,{placement:"bottomEnd",renderTitle:function(){return n.a.createElement(O.a,{icon:n.a.createElement(h.a,{icon:"filter"})})}},n.a.createElement("div",{style:{width:200}},n.a.createElement(ce.a,{indeterminate:e.indeterminate,checked:e.checkAll,onChange:e.handleCheckAll},"Select all"),n.a.createElement(ee.a,{style:{margin:"5px 0"}}),n.a.createElement(ue.a,{name:"checkboxList",value:e.value,onChange:e.handleChange},e.filterCategories.map((function(e){return n.a.createElement(ce.a,{key:e,value:e},e)}))))))}var he=function(e){return n.a.createElement(g.a,{style:{padding:"0 10px"}},n.a.createElement(E.a,{justify:"space-between",align:"middle"},n.a.createElement(l.b,{to:"/my-projects"},n.a.createElement(g.a.Header,null,n.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),n.a.createElement("div",{className:"center-header-title"},e.curProject?n.a.createElement("span",{style:{fontWeight:"bold",fontSize:"2em"}},e.curProject.title):null),n.a.createElement(E.a.Item,null,n.a.createElement(E.a,null,n.a.createElement(me,{searchQuery:e.searchQuery,setSearchQuery:e.setSearchQuery,updateFilters:e.updateFilters}),n.a.createElement(de,{setShowBib:e.setShowBib})))))},fe=a(495),ge=a(501),Ee=a(512);var we=function(e){return n.a.createElement(V.a,{backdrop:"static",show:e.confirmDelete,onHide:e.resetDelete,size:"xs"},n.a.createElement(V.a.Body,null,n.a.createElement(h.a,{icon:"remind",style:{color:"#ffb300",fontSize:24}}),"  ",'Are you sure you want to delete "',e.title,'"?',n.a.createElement("br",null),n.a.createElement("b",null,"This action cannot be undone.")),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{onClick:e.delete,appearance:"primary",loading:e.loading},"Delete"),n.a.createElement(K.a,{onClick:e.resetDelete,appearance:"default"},"Cancel")))};var ve=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.setEditing=function(e){r.setState({editing:e})},r.cancelEditing=function(e){null!==e.relatedTarget&&e.relatedTarget.id===r.state.updateProjectNameButtonId||r.setEditing(!1)},r.setDeleteProject=function(e){e.stopPropagation(),r.setState({confirmDelete:!0})},r.resetDeleteProject=function(){r.setState({confirmDelete:!1})},r.deleteProject=function(){r.setLoading(!0);var e="/projects/"+r.props.project.id;H(e,"DELETE").then((function(){var e;r.props.active&&(e=function(){return r.props.setCurProject(null)}),r.props.updateProjects(e)}))},r.updateProjectName=function(){r.setLoading(!0);var e=function(e){for(var t=0,a=e.length-1;t<e.length&&" "===e[t];)t++;for(;a>t&&" "===e[a];)a-=1;return e.substring(t,a+1)}(document.getElementById(r.state.updatedProjectNameFormId).value),t="/projects/"+r.props.project.id;H(t,"PATCH",{title:e}).then((function(){r.props.updateProjects((function(){r.setEditing(!1),r.setLoading(!1)}))}))},r.state={confirmDelete:!1,loading:!1,editing:!1,updatedProjectNameFormId:"updated-project-name",updateProjectNameButtonId:"update-project-name-button"},r}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(we,{confirmDelete:this.state.confirmDelete,resetDelete:this.resetDeleteProject,title:this.props.project.title,delete:this.deleteProject,loading:this.state.loading}),n.a.createElement(C.a.Item,{onSelect:this.props.onSelect,eventKey:this.props.eventKey,active:this.props.active},n.a.createElement(E.a,{justify:"space-between"},n.a.createElement(E.a.Item,null,this.state.editing?n.a.createElement(U.a,{onSubmit:this.updateProjectName},n.a.createElement(p.a,{autoFocus:!0,required:!0,id:this.state.updatedProjectNameFormId,onClick:function(e){return e.stopPropagation()},onBlur:function(t){return e.cancelEditing(t)},defaultValue:this.props.project.title})):this.props.project.title),n.a.createElement(E.a.Item,null,n.a.createElement(Ee.a,null,n.a.createElement(ye,{loading:this.state.loading,editing:this.state.editing,updateProjectNameButtonId:this.state.updateProjectNameButtonId,setEditing:this.setEditing,updateProjectName:this.updateProjectName}),n.a.createElement(O.a,{onClick:this.setDeleteProject,icon:n.a.createElement(h.a,{icon:"trash"}),size:"sm"}),n.a.createElement(be,{isShared:this.props.project.shared_users.length>0,setShowSharedProject:this.props.setShowSharedProject}))))))}}]),a}(n.a.Component),ye=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(re.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).buttonAction=function(t,a){t.stopPropagation(),a?e.props.setEditing(a):e.props.updateProjectName()},e}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return this.props.editing?n.a.createElement(K.a,{id:this.props.updateProjectNameButtonId,loading:this.props.loading,onClick:function(t){return e.buttonAction(t,!1)}},"Update"):n.a.createElement(O.a,{onClick:function(t){return e.buttonAction(t,!0)},icon:n.a.createElement(h.a,{icon:"edit2"}),size:"sm"})}}]),a}(n.a.Component),be=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(re.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleClick=function(t){t.stopPropagation(),e.props.setShowSharedProject(!0)},e}return Object(ne.a)(a,[{key:"render",value:function(){var e;return e=this.props.isShared?"share-alt":"people-group",n.a.createElement(O.a,{onClick:this.handleClick,icon:n.a.createElement(h.a,{icon:e}),size:"sm"})}}]),a}(n.a.Component),Ce=function(e){return n.a.createElement(C.a,{vertical:!0,activeKey:e.curProject?e.curProject.id:void 0,onSelect:function(t){return e.setCurProject(t)}},e.projects.map((function(t){return n.a.createElement(ve,{key:t.id,updateProjects:e.updateProjects,project:t,eventKey:t.id,setCurProject:e.setCurProject,setShowSharedProject:e.setShowSharedProject})})))};function je(e){return n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"New Project"),placement:"topEnd"},n.a.createElement(O.a,{onClick:function(){return e.setShowNewProjectForm(!0)},appearance:"primary",icon:n.a.createElement(h.a,{icon:"plus"}),circle:!0,size:"lg"}))}var Se=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setShowNewProjectForm=function(e){r.setState({showNewProjectForm:e})},r.renderProjectsList=function(){return null===r.props.projects?n.a.createElement(fe.a.Paragraph,{rows:15,active:!0}):n.a.createElement(Ce,{projects:r.props.projects,curProject:r.props.curProject,updateProjects:r.props.updateProjects,setCurProject:r.props.setCurProject,setShowSharedProject:r.props.setShowSharedProject})},r.state={showNewProjectForm:!1},r}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.props.updateProjects()}},{key:"componentDidUpdate",value:function(e,t,a){e.show===this.props.show||this.props.show||this.setShowNewProjectForm(!1)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ge.a,{size:"xs",show:this.props.show,onHide:this.props.close},n.a.createElement(ge.a.Header,null,n.a.createElement(ge.a.Title,null,"Your Projects")),n.a.createElement(ge.a.Body,{style:{marginBottom:10}},this.renderProjectsList()),n.a.createElement(ge.a.Footer,null,n.a.createElement(je,{setShowNewProjectForm:this.setShowNewProjectForm,showNewProjectForm:this.state.showNewProjectForm}))),n.a.createElement(q,{show:this.state.showNewProjectForm,setShow:this.setShowNewProjectForm,fromSidebar:!0}))}}]),a}(n.a.Component),Ie=a(90),Ne=a(61),ke=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setConfirmDelete=function(e){r.setState({confirmDelete:e},(function(){return r.setLoadingDelete(!1)}))},r.setLoadingDelete=function(e){r.setState({loadingDelete:e})},r.deleteItem=function(){r.setLoadingDelete(!0);var e="/items/"+r.props.selectedItem.id;H(e,"DELETE").then((function(){r.props.renderNetwork((function(){r.setConfirmDelete(!1),r.close()}))}))},r.addNewNote=function(){r.props.setAddItemMode("Note",r.props.selectedItem.url),r.close()},r.close=function(){r.props.setSelectedItem(null)},r.generateItemBody=function(e,t,a){var o=n.a.createElement("div",null);return t===a.SOURCEANDNOTE?o=n.a.createElement(De,{item:e,getSelectedItemDetails:r.props.getSelectedItemDetails,renderNetwork:r.props.renderNetwork}):t===a.SOURCEANDHIGHLIGHT?o=n.a.createElement(Oe,{item:e,getSelectedItemDetails:r.props.getSelectedItemDetails,renderNetwork:r.props.renderNetwork}):t===a.PURENOTE?o=n.a.createElement(Pe,{item:e,getSelectedItemDetails:r.props.getSelectedItemDetails,renderNetwork:r.props.renderNetwork}):t===a.PURESOURCE&&(o=n.a.createElement(Fe,{item:e,getSelectedItemDetails:r.props.getSelectedItemDetails,renderNetwork:r.props.renderNetwork})),o},r.state={confirmDelete:!1,loadingDelete:!1},r}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;if(null===this.props.selectedItem)return null;var t=this.props.selectedItem,a=this.props.getNodeType(t),r=this.props.nodeTypes;return n.a.createElement("div",null,n.a.createElement(we,{confirmDelete:this.state.confirmDelete,resetDelete:function(){return e.setConfirmDelete(!1)},title:t.title,delete:this.deleteItem,loading:this.state.loadingDelete}),n.a.createElement(V.a,{size:"md",show:!0,onHide:this.close},this.generateItemBody(t,a,r),n.a.createElement(V.a.Footer,null,n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Delete Item"),placement:"bottom"},n.a.createElement(O.a,{onClick:function(){return e.setConfirmDelete(!0)},icon:n.a.createElement(h.a,{icon:"trash"}),size:"lg"})),n.a.createElement(K.a,{appearance:"primary",onClick:this.addNewNote},"Add New Note"))))}}]),a}(n.a.Component);function Pe(e){return n.a.createElement("div",null,n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,e.item.content.substring(0,100))),n.a.createElement(V.a.Body,null,n.a.createElement(xe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork})))}function Oe(e){return n.a.createElement("div",null,n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,n.a.createElement(Te,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),n.a.createElement(V.a.Body,null,e.item.content))}function De(e){return n.a.createElement("div",null,n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,n.a.createElement(Te,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),n.a.createElement(V.a.Body,null,n.a.createElement(xe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork})))}function Fe(e){return n.a.createElement("div",null,n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,n.a.createElement(Te,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),n.a.createElement(V.a.Body,null))}var Te=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.updateTitle=function(e){var t=document.getElementById(r.state.newSourceTitleInputId).value;if(t!==r.props.item.title){r.setLoading(!0);var a="/items/"+r.props.item.id;H(a,"PATCH",{title:t}).then((function(){r.props.renderNetwork((function(){r.props.getSelectedItemDetails().then((function(){r.setLoading(!1),e()}))}))}))}else e()},r.setEditMode=function(e){e?r.setState({editMode:e}):r.updateTitle((function(){return r.setState({editMode:e})}))},r.renderTitle=function(){return r.state.editMode?n.a.createElement(p.a,{style:{width:400,marginRight:10},defaultValue:r.props.item.title,id:r.state.newSourceTitleInputId,autoFocus:!0,required:!0}):n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",style:{marginRight:10},href:r.props.item.url},r.props.item.title)},r.state={editMode:!1,loading:!1,newSourceTitleInputId:"new-source-title-input"},r}return Object(ne.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},this.renderTitle(),n.a.createElement(Me,{hide:!1,editMode:this.state.editMode,loading:this.state.loading,setEditMode:this.setEditMode,tooltipText:"Rename"}))}}]),a}(n.a.Component),xe=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.updateContent=function(e){var t=document.getElementById(r.state.noteContentId).value;if(t!==r.props.item.content){r.setLoading(!0);var a="/items/"+r.props.item.id;H(a,"PATCH",{content:t}).then((function(){r.props.renderNetwork((function(){r.props.getSelectedItemDetails().then((function(){r.setLoading(!1),e()}))}))}))}else e()},r.setEditMode=function(e){e?r.setState({editMode:e}):r.updateContent((function(){return r.setState({editMode:e})}))},r.renderContent=function(){return r.state.editMode?n.a.createElement(p.a,{style:{width:"100%",marginRight:10},defaultValue:r.props.item.content,id:r.state.noteContentId,autoFocus:!0,required:!0,componentClass:"textarea",rows:30}):n.a.createElement("div",null,r.props.item.content)},r.state={editMode:!1,loading:!1,noteContentId:"note-content-input"},r}return Object(ne.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{style:{display:"flex"}},this.renderContent(),n.a.createElement(Me,{hide:!1,editMode:this.state.editMode,loading:this.state.loading,setEditMode:this.setEditMode,tooltipText:"Edit"}))}}]),a}(n.a.Component);function Me(e){if(e.hide)return null;return e.editMode?n.a.createElement(K.a,{onClick:function(){return e.setEditMode(!1)},loading:e.loading,size:"xs"},"Done"):n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,e.tooltipText),placement:"top"},n.a.createElement(O.a,{onClick:function(){return e.setEditMode(!0)},icon:n.a.createElement(h.a,{icon:"edit2"}),size:"xs"}))}var Ae=ke,_e=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).close=function(){r.props.switchShowNewItemForm()},r.setLoading=function(e){r.setState({loading:e})},r.addNewItem=function(){var e,t;r.setLoading(!0),r.props.item?e=r.props.item:""===(e=document.getElementById(r.state.newItemUrlId).value)&&(e=null),t="Note"===r.props.inputType?document.getElementById(r.state.newItemNotesId).value:null;var a=r.props.newItemData,n={url:e,content:t,x_position:a.x,y_position:a.y,is_note:null!==t};null!==r.props.parentCluster?n.parent_cluster=r.props.parentCluster.id:n.parent_project=r.props.curProject.id,H("/items","POST",n).then((function(e){200===e.status?(R.a.info("This item already exists in this project."),r.props.switchShowNewItemForm()):201===e.status&&r.props.renderNetwork((function(){R.a.success("Item added successfully."),r.props.switchShowNewItemForm()}))}))},r.state={newItemUrlId:"new-item-url",newItemNotesId:"new-item-notes",loading:!1},r}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showNewItemForm!==this.props.showNewItemForm&&this.props.showNewItemForm&&this.setLoading(!1)}},{key:"render",value:function(){return this.props.showNewItemForm?("URL"===this.props.inputType?e=n.a.createElement(p.a,{autoFocus:!0,required:!0,type:"URL",id:this.state.newItemUrlId,placeholder:"Add URL"}):"Note"===this.props.inputType&&this.props.item?e=n.a.createElement(p.a,{autoFocus:!0,type:"Note",required:!0,id:this.state.newItemNotesId,placeholder:"Add Note",componentClass:"textarea",rows:30}):"Note"!==this.props.inputType||this.props.item||(e=n.a.createElement("div",null,n.a.createElement(p.a,{autoFocus:!0,type:"URL",id:this.state.newItemUrlId,placeholder:"Add optional URL"}),n.a.createElement(p.a,{type:"Note",required:!0,id:this.state.newItemNotesId,placeholder:"Add Note",componentClass:"textarea",rows:30}))),n.a.createElement(V.a,{show:!0,onHide:this.close},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"Insert the ",this.props.inputType," you'd like to add.")),n.a.createElement(U.a,{onSubmit:this.addNewItem},n.a.createElement(V.a.Body,null,e),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Add Item"))))):null;var e}}]),a}(n.a.Component),Le=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).close=function(){r.props.switchShowNewClusterForm()},r.setLoading=function(e){r.setState({loading:e})},r.addNewCluster=function(){r.setLoading(!0);var e=r.props.newClusterIds.item1,t=r.props.newClusterIds.item2,a=document.getElementById(r.state.newClusterNameId).value,n=r.props.stationaryClusterItemData,o=n.x,s=n.y;H("/clusters","POST",{item1_id:e,item2_id:t,x_position:o,y_position:s,name:a}).then((function(e){var t=function(){r.props.switchShowNewClusterForm(),r.props.disableEditMode()};201===e.status?r.props.renderNetwork((function(){t(),R.a.success("Cluster created successfully")})):(t(),R.a.error("Something went wrong"))}))},r.state={newClusterNameId:"new-cluster-name",loading:!1},r}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showNewClusterForm!==this.props.showNewClusterForm&&this.props.showNewClusterForm&&this.setLoading(!1)}},{key:"render",value:function(){return this.props.showNewClusterForm?n.a.createElement(V.a,{show:!0,onHide:this.close,style:Be},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"Enter the name of the cluster you'd like to create")),n.a.createElement(U.a,{onSubmit:this.addNewCluster},n.a.createElement(V.a.Body,null,n.a.createElement(p.a,{autoFocus:!0,type:"text",required:!0,id:this.state.newClusterNameId,placeholder:"New Cluster Name"})),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Add Cluster")))):null}}]),a}(n.a.Component),Be={position:"fixed",top:"50%",left:"50%",marginTop:"-96px",marginLeft:"-300px"},He=Le,Re=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(re.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).newItemButton=function(){return n.a.createElement(D,null)},e}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{style:{bottom:0}},n.a.createElement("div",{style:{position:"absolute",left:0,bottom:0}},n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Fit To Screen"),placement:"topStart"},n.a.createElement(O.a,{className:"footer-btn",appearance:"primary",icon:n.a.createElement(h.a,{icon:"arrows-alt"}),circle:!0,size:"lg",onClick:this.props.fit}))),n.a.createElement("a",{style:{marginBottom:25,bottom:0},className:"center-header-title",target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/forms/d/1kt298YLJw1InE8_Zsy5rD_gQ1Ph67mHqTsj-F2Tzvqs/viewform?edit_requested=true"},"Feedback?"),n.a.createElement("div",{style:{position:"absolute",right:0,bottom:0}},n.a.createElement(w.a,{style:{marginRight:15},trigger:["click","hover"],placement:"topEnd",renderTitle:this.newItemButton},n.a.createElement(w.a.Item,{onClick:function(){return R.a.warning("Feature coming soon...")}},n.a.createElement(h.a,{icon:"file-o"})," Add File"),n.a.createElement(w.a.Item,{onClick:function(){return e.props.setAddItemMode("URL")}},n.a.createElement(h.a,{icon:"globe2"})," Add Web Page"),n.a.createElement(w.a.Item,{onClick:function(){return e.props.setAddItemMode("Note")}},n.a.createElement(h.a,{icon:"edit"})," Add Notes"))))}}]),a}(n.a.Component),Ve=a(284),Ue=a(493),ze=a(105),Qe=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;Object(re.a)(this,a),(r=t.call(this,e)).setLoading=function(e){r.setState({loading:e})},r.getBibSources=function(e){if(null===r.props.curProject||!r.props.showBib)return null;r.setLoading(!0);var t="/projects/"+r.props.curProject.id+"/sources";if(H(t).then((function(t){var a=t.body.sources;a=a.sort((function(e,t){return e.title=e.title.trim(),t.title=t.title.trim(),e.title>t.title?1:-1})),r.setState({sources:a,allSources:a,subSources:a},(function(){"function"===typeof e&&e()}))})),r.props.curCluster){var a="/clusters/"+r.props.curCluster.id+"/subsources";H(a).then((function(t){var a=t.body.sources;a=a.sort((function(e,t){return e.title=e.title.trim(),t.title=t.title.trim(),e.title>t.title?1:-1})),r.setState({subSources:a},(function(){"function"===typeof e&&e(),r.setLoading(!1),console.log(a)}))}))}else r.setLoading(!1)},r.copyBib=function(){for(var e=document.getElementsByClassName("copyText"),t="",a=0;a<e.length;a++)t=(t=t.concat(e[a].innerHTML)).concat("<br><br>");function r(e){e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",t),e.preventDefault()}document.addEventListener("copy",r),document.execCommand("copy"),document.removeEventListener("copy",r),R.a.info("Copied Citations to Clipboard")},r.showMissingIcon=function(e){if(e.title&&e.url&&e.firstName&&e.lastName&&e.published_date&&e.site_name&&e.access_date)return null;var t=["title, ","URL, ","first name, ","last name, ","publish date, ","site name, ","access date, "],a="";return e.title||(a=a.concat(t[0])),e.url||(a=a.concat(t[1])),e.firstName||(a=a.concat(t[2])),e.lastName||(a=a.concat(t[3])),e.published_date||(a=a.concat(t[4])),e.site_name||(a=a.concat(t[5])),e.access_date||(a=a.concat(t[6])),a=a.substring(0,a.length-2),n.a.createElement(le.a,{placement:"top",trigger:"hover",speaker:n.a.createElement(ie.a,null,"This citation is missing the ",n.a.createElement("i",null,a," "),"field(s)")},n.a.createElement(h.a,{icon:"exclamation-circle",style:{color:"#f5a623"}}))},r.changeInclusion=function(e,t,a){e.stopPropagation();var n="/sources/"+a.id;H(n,"PATCH",{is_included:t});var o=r.state.sources,s=r.state.allSources,l=r.state.subSources,i=o?o.findIndex((function(e){return e.id===a.id})):null,c=s?s.findIndex((function(e){return e.id===a.id})):null,u=l?l.findIndex((function(e){return e.id===a.id})):null;o&&-1!==i&&(o[i].is_included=t),s&&-1!==c&&(s[c].is_included=t),l&&-1!==u&&(l[u].is_included=t),r.setState({sources:o,allSources:s,subSources:l})},r.renderAPADate=function(e){var t=r.state.months,a="(";return a=(a=(a=a+e.getFullYear()+", ")+t[e.getMonth()]+" ")+(e.getDate()+1)+"). "},r.renderChicagoDate=function(e){var t=r.state.months[e.getMonth()]+" ";return t=(t=t+(e.getDate()+1)+", ")+e.getFullYear()+"."},r.renderMLADate=function(e){var t=r.state.months,a=e.getDate()+1+" ";return a=(a=a+t[e.getMonth()]+" ")+e.getFullYear()+"."},r.formatAuthor=function(e){return e.firstName&&e.lastName?e.lastName+", "+e.firstName+".":""},r.renderAPACitation=function(e){var t,a="",o="",s=new Date(e.published_date),l=new Date(e.access_date);return e.published_date?a=r.renderAPADate(s):e.access_date&&(a=r.renderAPADate(l)),e.title&&(o=o+e.title+"."),t=r.formatAuthor(e),n.a.createElement("p",{className:r.isIncludedClassName(e.is_included)},t," ",a,n.a.createElement("i",null,o)," ",""!==e.site_name?e.site_name+".":"",n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url,"."))},r.renderChicagoCitation=function(e){var t,a="",o="",s=new Date(e.published_date),l=new Date(e.access_date);return e.published_date?a=r.renderChicagoDate(s):e.access_date&&(a=r.renderChicagoDate(l)),e.title&&(o=o+'"'+e.title+'."'),t=r.formatAuthor(e),n.a.createElement("p",{className:r.isIncludedClassName(e.is_included)},t," ",o,n.a.createElement("i",null,e.site_name),", ",a," ",n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url,"."))},r.renderMLACitation=function(e){var t,a="",o="",s="",l=new Date(e.published_date),i=new Date(e.access_date);return e.published_date&&(a=r.renderMLADate(l)),e.access_date&&(o="Accessed "+r.renderMLADate(i)),e.title&&(s=s+'"'+e.title+'."'),t=r.formatAuthor(e),n.a.createElement("p",{style:{maxWidth:"800px"},className:r.isIncludedClassName(e.is_included)},t," ",s,n.a.createElement("i",null,""!==e.site_name?e.site_name+", ":""),a,n.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"}," "+e.url,".")," ",o)},r.renderFormatType=function(e){var t=null;return r.state.curFormat===r.state.formats.APA?t=r.renderAPACitation(e):r.state.curFormat===r.state.formats.CHI?t=r.renderChicagoCitation(e):r.state.curFormat===r.state.formats.MLA&&(t=r.renderMLACitation(e)),t},r.isIncludedClassName=function(e){return e?"copyText":void 0},r.setEditSource=function(e){r.setState({editSource:e})},r.changeFormatType=function(e){r.setState({curFormat:e})},r.renderCitations=function(e){return r.state.sources.map((function(t,a){return t.is_included===e?n.a.createElement(ce.a,{defaultChecked:e,style:e?null:{color:"#d3d3d3"},onChange:function(e,a,n){return r.changeInclusion(n,a,t)},key:a},n.a.createElement(E.a,{align:"middle",justify:"space-between"},n.a.createElement(ze.a,{colspan:18},r.renderFormatType(t)),n.a.createElement(ze.a,null,n.a.createElement(Ge,{source:t,setEditSource:r.setEditSource}),r.showMissingIcon(t)))):null}))},r.renderBibBody=function(){return r.state.loading?n.a.createElement(fe.a.Paragraph,{rows:4,active:!0}):n.a.createElement(ue.a,{name:"checkboxList"},r.renderCitations(!0),n.a.createElement(ee.a,null),r.renderCitations(!1))},r.toggleClusterBib=function(e){e?r.setState({sources:r.state.subSources}):r.setState({sources:r.state.allSources})};var o={APA:"APA Reference List",MLA:"MLA Works Cited",CHI:"Chicago Bibliography Style"};return r.state={sources:null,allSources:null,subSources:null,curFormat:o.APA,formats:o,months:["January","February","March","April","May","June","July","August","September","October","November","December"],editSource:null,loading:!1},r}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showBib!==this.props.showBib&&this.props.showBib&&this.getBibSources()}},{key:"componentDidMount",value:function(){this.getBibSources()}},{key:"render",value:function(){var e=this,t=this.state.formats,a=[{value:t.APA,label:t.APA},{value:t.MLA,label:t.MLA},{value:t.CHI,label:t.CHI}];return null!==this.state.sources||this.state.loading?n.a.createElement(V.a,{full:!0,show:this.props.showBib,onHide:function(){return e.props.setShowBib(!1)}},n.a.createElement(V.a.Header,{style:{marginRight:"5%"}},n.a.createElement(V.a.Title,null,n.a.createElement("span",{style:{marginRight:5}},"Bibliography"),n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Copy to Clipboard"),placement:"top"},n.a.createElement(O.a,{onClick:this.copyBib,icon:n.a.createElement(h.a,{icon:"copy"}),size:"sm"})),n.a.createElement(Ve.a,{defaultValue:this.state.curFormat?this.state.curFormat:t.APA,data:a,onChange:this.changeFormatType,style:{float:"right"},cleanable:!1,searchable:!1}),n.a.createElement(te.a,{unCheckedChildren:n.a.createElement("div",{style:{color:"#3498FF"}}," all "),checkedChildren:"cluster",size:"lg",style:{float:"middle"},onChange:this.toggleClusterBib}))),n.a.createElement(V.a.Body,null,this.renderBibBody()),n.a.createElement(We,{close:function(){return e.setEditSource(null)},source:this.state.editSource,getBibSources:this.getBibSources})):null}}]),a}(n.a.Component),Ge=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Edit Citation Fields"),placement:"top"},n.a.createElement(O.a,{icon:n.a.createElement(h.a,{icon:"edit2"}),size:"xs",onClick:function(){return e.props.setEditSource(e.props.source)}}))}}]),a}(n.a.Component),We=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).setFormValue=function(e){r.setState({formValue:e})},r.setLoading=function(e){r.setState({loading:e})},r.showField=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a?null:"";if(!e)return r;var n=e[t];return n?a?new Date(n):n:r},r.saveInfo=Object(x.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setLoading(!0),t="/sources/"+r.props.source.id,a={author:r.state.formValue.lastName&&r.state.formValue.firstName?r.state.formValue.lastName+", "+r.state.formValue.firstName:"",title:r.state.formValue.title,published_date:r.state.formValue.publishDate,site_name:r.state.formValue.siteName,access_date:r.state.formValue.accessDate,url:r.state.formValue.url},e.next=5,H(t,"PATCH",a);case 5:r.props.getBibSources((function(){r.props.close(),r.setLoading(!1)}));case 6:case"end":return e.stop()}}),e)}))),r.state={loading:!1,formValue:{firstName:r.showField(e.source,"firstName"),lastName:r.showField(e.source,"lastName"),title:r.showField(e.source,"title"),publishDate:r.showField(e.source,"published_date",!0),siteName:r.showField(e.source,"site_name"),accessDate:r.showField(e.source,"access_date",!0),url:r.showField(e.source,"url")}},r}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.source!==this.props.source&&this.setFormValue({firstName:this.showField(this.props.source,"firstName"),lastName:this.showField(this.props.source,"lastName"),title:this.showField(this.props.source,"title"),publishDate:this.showField(this.props.source,"published_date",!0),siteName:this.showField(this.props.source,"site_name"),accessDate:this.showField(this.props.source,"access_date",!0),url:this.showField(this.props.source,"url")})}},{key:"render",value:function(){if(null===this.props.source)return null;return n.a.createElement(V.a,{size:"sm",show:!0,onHide:this.props.close},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"Edit Citation Fields")),n.a.createElement(V.a.Body,null,n.a.createElement(U.a,{layout:"horizontal",onChange:this.setFormValue,formValue:this.state.formValue},n.a.createElement(U.a,{layout:"inline",onChange:this.setFormValue,formValue:this.state.formValue},n.a.createElement(z.a,null,n.a.createElement(Q.a,{style:{alignContent:"center"}},"Author"),n.a.createElement(G.a,{placeholder:"First Name",name:"firstName",style:{width:140}}),n.a.createElement(G.a,{placeholder:"Last Name",name:"lastName",style:{width:140}}))),n.a.createElement(z.a,null,n.a.createElement(Q.a,null,"Title"),n.a.createElement(G.a,{name:"title"})),n.a.createElement(z.a,null,n.a.createElement(Q.a,null,"Publish Date"),n.a.createElement(G.a,{name:"publishDate",accepter:Ue.a,format:"MM-DD-YYYY",oneTap:!0})),n.a.createElement(z.a,null,n.a.createElement(Q.a,null,"Site Name"),n.a.createElement(G.a,{name:"siteName"})),n.a.createElement(z.a,null,n.a.createElement(Q.a,null,"Access Date"),n.a.createElement(G.a,{name:"accessDate",accepter:Ue.a,format:"MM-DD-YYYY",oneTap:!0})),n.a.createElement(z.a,null,n.a.createElement(Q.a,null,"URL"),n.a.createElement(G.a,{name:"url"})))),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{onClick:this.saveInfo,loading:this.state.loading},"Save")))}}]),a}(n.a.Component),Ke=Qe,qe=a(492),Je=qe.a.Column,Ye=qe.a.HeaderCell,Ze=qe.a.Cell,Xe=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).saveUser=Object(x.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setLoading(!0),t=document.getElementById(r.state.userInputId).value.trim(),a={shared_proj:r.props.curProject.id,email:t,role:"Collaborator"},"/shared_projects",e.next=6,H("/shared_projects","POST",a);case 6:r.props.updateProjects();case 7:case"end":return e.stop()}}),e)}))),r.setLoading=function(e){r.setState({loading:e})},r.state={userInputId:"user-input-id",loading:!1},r}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.curProject!==this.props.curProject&&this.props.showSharedProject&&this.setLoading(!1)}},{key:"render",value:function(){var e=this;return this.props.curProject?n.a.createElement(V.a,{show:this.props.showSharedProject,onHide:function(){return e.props.setShowSharedProject(!1)}},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"Shared settings for ",this.props.curProject.title)),n.a.createElement(U.a,{onSubmit:this.saveUser},n.a.createElement(V.a.Body,null,n.a.createElement(qe.a,{data:this.props.curProject.shared_users},n.a.createElement(Je,{width:200,fixed:!0},n.a.createElement(Ye,null,"Name"),n.a.createElement(Ze,{dataKey:"name"})),n.a.createElement(Je,{width:200},n.a.createElement(Ye,null,"Email"),n.a.createElement(Ze,{dataKey:"email"})),n.a.createElement(Je,{width:200},n.a.createElement(Ye,null,"Role"),n.a.createElement(Ze,{dataKey:"role"}))),n.a.createElement(p.a,{style:{marginRight:10},placeholder:"Type email you want to share project with",id:this.state.userInputId,autoFocus:!0,required:!0,componentClass:"textarea",rows:30})),n.a.createElement(V.a.Footer,null,n.a.createElement(K.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Save")))):null}}]),a}(n.a.Component),$e=a(84),et=a(499),tt=function(e,t){for(var a=e,r=a.length-1;r>0;r--){var n=Math.floor(Math.random()*(r+1)),o=[a[n],a[r]];a[r]=o[0],a[n]=o[1]}return a.slice(0,t)},at=et.a.Line,rt=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).getRandomItems=function(){return tt(r.props.items,4)},r.updateRandomItems=function(){r.setState({randomItems:r.getRandomItems(),show:!r.state.show}),console.log("show is false"),console.log(r.state.show)},r.chooseItem=function(e){r.setState({numPlayed:r.state.numPlayed+1,selectedItems:[].concat(Object($e.a)(r.state.selectedItems),[e]),show:!r.state.show},r.updateRandomItems),console.log("animation should show"),console.log(r.state.show)},r.state={randomItems:r.getRandomItems(),numPlayed:0,selectedItems:[],show:!0},r}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return this.state.numPlayed<this.props.numRounds?n.a.createElement(X.a,null,n.a.createElement("h1",null,"OddOnesOut"),n.a.createElement("h3",null,"Round ",this.state.numPlayed+1),n.a.createElement(at,{percent:this.state.numPlayed/5*100,status:"active"}),n.a.createElement("h5",null,"Select the odd one out!"),this.state.randomItems.map((function(t,a){return console.log(e.props.color(t)),n.a.createElement(K.a,{block:!0,key:a,appearance:"primary",color:e.props.color(t),style:{margin:20,display:"block"},onClick:function(){return e.chooseItem(t)}},e.props.generateDisplayValue(t))}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"OddOnesOut"),n.a.createElement("h3",null,"Well Done!"),n.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),n.a.createElement("h5",null,"Here are your selected items:"),this.state.selectedItems.map((function(t,a){return n.a.createElement(K.a,{block:!0,key:a,appearance:"primary",color:t.color,style:{margin:20,display:"block"}},e.props.generateDisplayValue(t))})))}}]),a}(n.a.Component),nt=et.a.Line,ot=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).getRandomItems=function(){return tt(r.props.items,2)},r.updateRandomItems=function(){r.setState({randomItems:r.getRandomItems()})},r.submitCommon=function(){var e=document.getElementById(r.state.commonId);r.setState({numPlayed:r.state.numPlayed+1,commonality:[].concat(Object($e.a)(r.state.commonality),[e.value])},r.updateRandomItems),e.value=""},r.state={randomItems:r.getRandomItems(),numPlayed:0,commonality:[],commonId:"common-Id"},r}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return this.state.numPlayed<this.props.numRounds?n.a.createElement(n.a.Fragment,null,n.a.createElement(X.a,null,n.a.createElement($.a,null,n.a.createElement("h1",null,"What comes to mind?"),n.a.createElement("h3",null,"Round ",this.state.numPlayed+1)),n.a.createElement($.a,null,n.a.createElement(nt,{percent:this.state.numPlayed/5*100,status:"active"})),n.a.createElement($.a,{style:{marginTop:"10px"}},n.a.createElement("h5",null,"What is the commonality between the following?")),this.state.randomItems.map((function(t,a){return n.a.createElement($.a,{style:{marginTop:"20px"}},n.a.createElement(K.a,{block:!0,key:a,appearance:"primary",color:"blue",style:{display:"block"}},e.props.generateDisplayValue(t)))})),n.a.createElement($.a,{style:{marginTop:"20px"}},n.a.createElement(U.a,{onSubmit:this.submitCommon},n.a.createElement(p.a,{autoFocus:!0,type:"text",required:!0,componentClass:"textarea",id:this.state.commonId,rows:5,placeholder:"Write your thoughts here..."}),n.a.createElement(K.a,{appearance:"primary",color:"blue",style:{display:"block",marginTop:"20px"},type:"submit"},"Next"))))):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"What comes to mind?"),n.a.createElement("h3",null,"Well Done!"),n.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),n.a.createElement("h5",null,"Here are the common themes you have identified:"),n.a.createElement("ul",null,this.state.commonality.map((function(e,t){return n.a.createElement("li",{key:t},e)}))))}}]),a}(n.a.Component),st=et.a.Line,lt=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).renderNetwork=function(e){if(null!==r.props.curProject){var t=r.createNodesAndEdges(),a=Object(c.a)(t,2),n=a[0],o=a[1],s=document.getElementById("MakePairs"),l={nodes:n,edges:o},i={nodes:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},color:{background:getComputedStyle(document.querySelector(".rs-btn-primary"))["background-color"]},widthConstraint:{maximum:500}},edges:{color:"black",physics:!1,smooth:!1,hoverWidth:0},interaction:{selectConnectedEdges:!1,hover:!0,hoverConnectedEdges:!1,zoomView:!1,dragView:!1},manipulation:{enabled:!1,addEdge:function(e,t){console.log("add edge",e),e.from!==e.to&&(t(e),r.addEdgeConnection(e.from,e.to)),u.addEdgeMode()}}};console.log("container",s,"data",l);var u=new Ne.b(s,l,i);u.addEdgeMode(),u.fit(),u.on("hoverNode",(function(){return u.canvas.body.container.style.cursor="pointer"})),u.on("blurNode",(function(){return u.canvas.body.container.style.cursor="default"})),r.setState({network:u},e)}},r.addEdgeConnection=function(e,t){var a=r.state.pairCount+1;r.state.network.body.data.edges.add([{from:e,to:t}]);var n=r.state.network.body.data.nodes.get(e).label,o=r.state.network.body.data.nodes.get(t).label;r.setState({connections:[].concat(Object($e.a)(r.state.connections),[{from:n,to:o}]),pairCount:a},(function(){2===r.state.pairCount&&r.submitItems()}))},r.getRandomItems=function(){return tt(r.props.items,4)},r.updateRandomItems=function(){r.setState({randomItems:r.getRandomItems()})},r.submitItems=function(){console.log("network",r.state.network),r.setState({numPlayed:r.state.numPlayed+1,pairCount:0},r.updateRandomItems),r.state.numPlayed<r.props.numRounds&&r.renderNetwork()},r.state={randomItems:r.getRandomItems(),numPlayed:0,connections:[],network:null,visNodes:null,visEdges:null,selectedNode:null,items:null,loading:!1,pairCount:0},console.log("numRounds",r.props.numRounds),r}return Object(ne.a)(a,[{key:"createNodesAndEdges",value:function(){var e=new Ne.a,t=new Ne.a;for(var a in this.state.randomItems){var r=this.state.randomItems[a],n=a%2?0:500,o=a<2?0:200;e.add({id:r.id,label:this.props.generateDisplayValue(r),x:n,y:o})}return this.setState({visNodes:e,visEdges:t}),[e,t]}},{key:"componentDidMount",value:function(){this.renderNetwork()}},{key:"render",value:function(){return this.state.numPlayed<this.props.numRounds?n.a.createElement(X.a,null,n.a.createElement("h1",null,"Make Pairs"),n.a.createElement("h3",null,"Round ",this.state.numPlayed+1),n.a.createElement(st,{percent:this.state.numPlayed/5*100,status:"active"}),n.a.createElement("div",{id:"MakePairs",style:{height:300}})):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Make Pairs"),n.a.createElement("h3",null,"Well Done!"),n.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),n.a.createElement("h5",null,"Here are the connections you have identified:"),this.state.connections.slice(1,this.state.connections.length).map((function(e,t){return[n.a.createElement(K.a,{key:t,appearance:"primary",color:"blue",style:{margin:20}},e.from),n.a.createElement(ee.a,{key:t+50},"is related to"),n.a.createElement(K.a,{key:t+100,appearance:"primary",color:"blue",style:{margin:20}},e.to),n.a.createElement(ee.a,{key:t+200})]})))}}]),a}(n.a.Component),it=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){return Object(re.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.sources?null:n.a.createElement("div",{id:"GameWindow"},n.a.createElement(V.a,{full:!0,show:this.props.showGame,onHide:function(){return e.props.setShowGame(!1)}},n.a.createElement(V.a.Header,null,n.a.createElement(V.a.Title,null,"MiniGames")),n.a.createElement(V.a.Body,null,this.props.selectedGame)))}}]),a}(n.a.Component),ct=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;return Object(re.a)(this,a),(r=t.call(this,e)).randomizer=function(){r.setState({selectedGame:r.state.games[Math.floor(Math.random()*r.state.games.length)],numRounds:Math.ceil(6*Math.random())})},r.generateDisplayValue=function(e){return e.title?e.title:e.content},r.updateGames=function(){console.log("num items",r.props.items.length);var e=[],t={items:r.props.items,numRounds:r.state.numRounds,generateDisplayValue:r.generateDisplayValue,color:r.props.color};e.push(n.a.createElement(rt,t)),e.push(n.a.createElement(ot,t)),r.props.items.length>4&&e.push(n.a.createElement(lt,t)),r.setState({games:e},r.randomizer)},r.setShowGame=function(e){r.props.network&&r.setState({showGame:e})},r.handleClick=function(){r.setShowGame(!0),r.updateGames()},r.state={loading:!1,selectedGame:null,numRounds:5},r}return Object(ne.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(it,{showGame:this.state.showGame,setShowGame:this.setShowGame,items:this.props.items,selectedGame:this.state.selectedGame}),n.a.createElement(le.a,{preventOverflow:!0,trigger:"hover",speaker:n.a.createElement(ie.a,null,"Minigames"),placement:"topEnd"},n.a.createElement(O.a,{appearance:"primary",icon:n.a.createElement(h.a,{icon:"gamepad"}),circle:!0,size:"lg",onClick:this.handleClick,style:{top:"50%",position:"absolute",right:5,zIndex:1}})))}}]),a}(n.a.Component),ut=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(){var e;Object(re.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).buttonAction=function(){if(null===e.props.curClusterView.parent_cluster)e.props.setCurClusterView(null);else{var t="/clusters/"+e.props.curClusterView.parent_cluster;H(t).then((function(t){e.props.setCurClusterView(t.body.cluster)}))}},e}return Object(ne.a)(a,[{key:"render",value:function(){return null===this.props.curClusterView?null:n.a.createElement("div",{style:{display:"block",width:"100px",height:"100px",borderStyle:"solid",borderWidth:"0 0 150px 150px",borderColor:"transparent transparent transparent #3498FF",position:"fixed",top:55,left:0,color:"white",cursor:"pointer"},onClick:this.buttonAction},n.a.createElement("span",{style:{position:"absolute",top:"30px",width:"80px",left:"-140px",fontFamily:"Apple-System",transform:"rotate(-45deg)",color:"white",textAlign:"center",display:"block",userSelect:"none"}},"To previous level"))}}]),a}(n.a.Component);var dt=function(e){var t=Object(r.useState)(!1),a=Object(c.a)(t,2),o=a[0],s=a[1],l=Object(r.useState)(""),i=Object(c.a)(l,2),u=i[0],d=i[1],m=Object(r.useState)(e.curClusterView),h=Object(c.a)(m,2),f=h[0],g=h[1],E={position:"absolute",top:5,display:"flex",justifyContent:"center",width:"100%",fontSize:"1.5em"},w="";null!==f&&(w=f.name);var v=n.a.createElement(ie.a,null,"Click to rename.");return null===f?null:o?n.a.createElement("div",{style:E},n.a.createElement(p.a,{style:{width:120},defaultValue:w,autoFocus:!0,onBlur:function(){return s(!1)},onInput:function(e){return d(e.target.value)}}),n.a.createElement(K.a,{size:"xs",style:{marginLeft:5},onMouseDown:function(e){return e.preventDefault()},onClick:function(){return function(){var t="/clusters/"+f.id;H(t,"PATCH",{name:u}).then((function(t){e.setCurClusterView(t.body.cluster),s(!1),g(t.body.cluster)}))}()}},"Save")):n.a.createElement(le.a,{placement:"bottom",trigger:"hover",speaker:v},n.a.createElement("div",{style:E,onClick:function(){return s(!0)}},w))};function mt(e,t){return"undefined"!==typeof e&&"undefined"!==typeof t&&(t.right>e.left&&t.left<e.right&&t.top<e.bottom&&t.bottom>e.top)}var pt=function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r,n;Object(re.a)(this,a),(n=t.call(this,e)).generateVisClusterId=function(e){return"c"+e.id},n.generateClusterIdFromVisId=function(e){return parseInt(e.substring(e.indexOf("c")+1))},n.generateVisInClusterId=function(e,t,a){var r,n="c"+e.id;return"item"===t?r="i"+a.id:"title"===t?r="t":"count"===t&&(r="n"),n+r},n.generateClusterIdAndNodeIdFromVisInClusterId=function(e){var t,a=e.indexOf("i");return a>=0?t=parseInt(e.substring(a+1)):-1===(a=e.indexOf("t"))&&(a=e.indexOf("n")),[parseInt(e.substring(e.indexOf("c")+1,a)),t]},n.isItem=function(e){var t=n.state.visNodes.get(e);return!!t&&"items"===t.group},n.isCluster=function(e){var t=n.state.visNodes.get(e);return!!t&&"clusters"===t.group},n.isItemInCluster=function(e){var t=n.state.visNodes.get(e);return!!t&&"inCluster"===t.group},n.setSelectedItem=function(e){n.setState({selectedItem:e})},n.getSelectedItemDetails=Object(x.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/items/"+n.state.selectedItem.id,e.next=3,H(t);case 3:a=e.sent,n.setSelectedItem(a.body.item);case 5:case"end":return e.stop()}}),e)}))),n.setNonSelectedNodes=function(e,t){n.setState({nonSelectedNodes:t.getIds().filter((function(t){return t!==e}))})},n.handleClickedNode=function(e){n.setSelectedItem(n.state.items.find((function(t){return t.id===e})))},n.handleClickedCluster=function(e){n.setCurClusterView(n.state.clusters.find((function(t){return t.id===e})))},n.setCurClusterView=function(e){n.setState({curClusterView:e})},n.handleDragStart=function(e,t,a){var r=n.isCluster(e),o=n.isItemInCluster(e);if(r||o){var s,l;r?(s=n.state.clusters.find((function(t){return t.id===n.generateClusterIdFromVisId(e)})),l=e):(s=n.state.clusters.find((function(t){return t.id===n.generateClusterIdAndNodeIdFromVisInClusterId(e)[0]})),l=n.generateVisClusterId(s));var i=s.child_items.slice(0,2).map((function(e){return n.generateVisInClusterId(s,"item",e)})),c=n.generateVisInClusterId(s,"title"),u=i.concat([l,c]);if(s.child_items.length>2){var d=n.generateVisInClusterId(s,"count");u.push(d)}a.selectNodes(u)}else n.setNonSelectedNodes(e,t)},n.setLoading=function(e){n.setState({loading:e})},n.getItems=function(){var e=Object(x.a)(T.a.mark((function e(t){var a,r,o,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.curProject){e.next=2;break}return e.abrupt("return",null);case 2:if(n.setLoading(!0),0!==n.props.filters.length){e.next=7;break}return n.setLoading(!1),n.setState({items:[]},t),e.abrupt("return");case 7:if(null!==n.state.curClusterView){e.next=17;break}return a="/projects/"+n.props.curProject.id+"/items",""!==n.props.searchQuery&&0!==n.props.filters.length&&(a=L(a,n.props.searchQuery,n.props.filters)),e.next=12,H(a);case 12:r=e.sent,n.setLoading(!1),n.setState({items:r.body.items},t),e.next=23;break;case 17:return o="/clusters/"+n.state.curClusterView.id,e.next=20,H(o);case 20:s=e.sent,n.setLoading(!1),n.setState({items:s.body.cluster.child_items},t);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getClusters=function(){var e=Object(x.a)(T.a.mark((function e(t){var a,r,o,s,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.props.curProject){e.next=2;break}return e.abrupt("return",null);case 2:if(n.setLoading(!0),null!=n.state.curClusterView){e.next=12;break}return a="/projects/"+n.props.curProject.id+"/clusters",e.next=7,H(a);case 7:r=e.sent,n.setLoading(!1),n.setState({clusters:r.body.clusters},t),e.next=18;break;case 12:return o="/clusters/"+n.state.curClusterView.id,e.next=15,H(o);case 15:s=e.sent,l=s.body.cluster.child_clusters.map((function(e){return H("/clusters/"+e)})),Promise.all(l).then((function(e){n.setLoading(!1),n.setState({clusters:e.map((function(e){return e.body.cluster}))},t)}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateItemPosition=function(e,t,a){H("/items/"+e,"PATCH",{x_position:t,y_position:a}).then()},n.updateClusterPosition=function(e,t,a){H("/clusters/"+e,"PATCH",{x:t,y:a}).then()},n.fitNetworkToScreen=function(){null!==n.state.network&&n.state.network.fit()},n.disableEditMode=function(){n.setShowNewItemHelperMessage(!1),n.setShowNewClusterHelperMessage(!1),n.state.network&&n.state.network.disableEditMode()},n.switchShowNewItemForm=function(){n.setState({showNewItemForm:!n.state.showNewItemForm},(function(){n.state.showNewItemForm||n.disableEditMode()}))},n.switchShowNewClusterForm=function(){n.setState({showNewClusterForm:!n.state.showNewClusterForm},(function(){n.state.showNewClusterForm||n.disableEditMode()}))},n.setShowNewItemHelperMessage=function(e){n.setState({showNewItemHelperMessage:e})},n.addItem=function(e,t){n.switchShowNewItemForm(),n.setShowNewItemHelperMessage(!1),n.setState({newItemData:e})},n.setShowNewClusterHelperMessage=function(e){n.setState({showNewClusterHelperMessage:e})},n.setShowAddToClusterHelperMessage=function(e){n.setState({showAddToClusterHelperMessage:e})},n.setAddItemMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.setState({newItemFormType:e,item:t}),n.setShowNewItemHelperMessage(!0),n.state.network&&n.state.network.addNodeMode()},n.addItemToCluster=function(e,t){n.setLoading(!0),H("/clusters/"+e+"/items/"+t,"POST").then((function(e){n.setLoading(!1),e.body.success?R.a.success("This item was successfully added"):R.a.error("This item could not be added"),n.renderNetwork()}))},n.moveItemFromClusterToHigherLevel=function(e,t){n.setLoading(!0),H("/clusters/"+t+"/items/"+e,"DELETE").then((function(e){n.setLoading(!1),e.body.success?R.a.success("The item was successfully moved"):R.a.error("This item could not be moved"),n.renderNetwork()}))},n.getNodeType=function(e){return e?e.url?e.url&&e.is_note&&e.content?n.state.types.SOURCEANDNOTE:e.url&&!e.is_note&&e.content?n.state.types.SOURCEANDHIGHLIGHT:e.url&&!e.content?n.state.types.PURESOURCE:void 0:n.state.types.PURENOTE:n.state.types.NULL},n.getNodeLabel=function(e,t){var a,r=n.state.types;return e.content&&(a=e.content).length>100&&(a=a.substring(0,100)+"..."),t===r.PURESOURCE?e.title:t===r.SOURCEANDNOTE||t===r.SOURCEANDHIGHLIGHT?e.title+"\n"+a:t===r.PURENOTE?a:void 0},n.getNodePosition=function(e){var t=e.x_position,a=e.y_position;if(null===t||null===a){var r=n.generateNodePositions(e),o=Object(c.a)(r,2);t=o[0],a=o[1],n.updateItemPosition(e.id,t,a)}return[t,a]},n.getColor=function(e){var t=n.getNodeType(e);return n.state.nodeColors[t]},n.renderNetwork=function(e){null!==n.props.curProject&&n.getItems((function(){n.getClusters((function(){var t=n.createNodes();n.createClusters().forEach((function(e){t.add(e)}));var a=document.getElementById("mindmap"),r={nodes:t},o={groups:{clusters:{chosen:{label:function(e,t,a,r){e.color="#ffffff00"},node:function(e,t,a,r){e.color="#ffffff00"}},shape:"circle",font:{face:"Apple-System",color:"#ffffff00"},color:{border:"#00c0de",background:"#ffffff00"},physics:!1},items:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},widthConstraint:{maximum:500}},inCluster:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},widthConstraint:{maximum:500}}},interaction:{selectConnectedEdges:!1,hover:!0,hoverConnectedEdges:!1},manipulation:{enabled:!1,addNode:n.addItem}},s=new Ne.b(a,r,o);s.fit(),s.on("click",(function(e){if(void 0!==e.nodes&&e.nodes.length>0){var t=e.nodes[0];if(n.isItem(t))n.handleClickedNode(t);else if(n.isCluster(t)||n.isItemInCluster(t)){var a;a=n.isItemInCluster(t)?n.generateClusterIdAndNodeIdFromVisInClusterId(t)[0]:n.generateClusterIdFromVisId(t),n.handleClickedCluster(a)}}})),s.on("dragStart",(function(e){if(void 0!==e.nodes&&e.nodes.length>0){var a=e.nodes[0];n.handleDragStart(a,t,s)}}));s.on("dragging",function(e,t){var a,r;return function(){var n=this,o=arguments;r?(clearTimeout(a),a=setTimeout((function(){Date.now()-r>=t&&(e.apply(n,o),r=Date.now())}),t-(Date.now()-r))):(e.apply(n,o),r=Date.now())}}((function(e){if(void 0!==e.nodes&&e.nodes.length>0){var t=s.getSelectedNodes()[0];if(n.isItem(t)){var a=s.getBoundingBox(t),r=n.state.nonSelectedNodes;!n.state.showNewClusterHelperMessage&&!n.state.showAddToClusterHelperMessage&&r.length>=1?(r.forEach((function(e){mt(s.getBoundingBox(e),a)&&(n.isItem(e)?(n.setState({stationaryClusterItemData:s.getPosition(e)}),n.setState({newClusterIds:{item1:t,item2:e}}),n.setShowNewClusterHelperMessage(!0)):n.isCluster(e)&&(n.setState({existingClusterId:e}),n.setShowAddToClusterHelperMessage(!0)))})),n.state.curClusterView&&n.state.raiseLevelButtonHover?n.setState({showRemoveItemFromClusterMessage:!0}):n.state.curClusterView&&!n.state.raiseLevelButtonHover&&n.setState({showRemoveItemFromClusterMessage:!1})):(n.state.newClusterIds&&!mt(a,s.getBoundingBox(n.state.newClusterIds.item2))&&n.setShowNewClusterHelperMessage(!1),n.state.existingClusterId&&!mt(a,s.getBoundingBox(n.state.existingClusterId))&&n.setShowAddToClusterHelperMessage(!1))}}}),100)),s.on("dragEnd",(function(e){if(0!==s.getSelectedNodes().length)if(n.state.showNewClusterHelperMessage)n.setState({showNewClusterForm:!0});else if(n.state.showAddToClusterHelperMessage){var t=n.state.existingClusterId,a=n.generateClusterIdFromVisId(t);n.addItemToCluster(a,s.getSelectedNodes()[0]),n.setShowAddToClusterHelperMessage(!1),n.renderNetwork()}else if(n.state.showRemoveItemFromClusterMessage&&n.state.raiseLevelButtonHover)n.moveItemFromClusterToHigherLevel(s.getSelectedNodes()[0],n.state.curClusterView.id),n.setState({showRemoveItemFromClusterMessage:!1}),n.renderNetwork();else{var r=s.getSelectedNodes()[0],o=s.getPosition(r),l=o.x,i=o.y;if(n.isItem(r))n.updateItemPosition(r,l,i);else if(n.isCluster(r)||n.isItemInCluster(r)){var u;if(n.isCluster(r))u=n.generateClusterIdFromVisId(r);else{var d=n.generateClusterIdAndNodeIdFromVisInClusterId(r);u=Object(c.a)(d,1)[0]}n.updateClusterPosition(u,l,i)}}})),s.on("hoverNode",(function(){return s.canvas.body.container.style.cursor="pointer"})),s.on("blurNode",(function(){return s.canvas.body.container.style.cursor="default"})),n.setState({network:s},e)}))}))};var o={NULL:null,URL:"url",NOTES:"notes"},s={NULL:null,PURESOURCE:"pureSource",SOURCEANDNOTE:"sourceAndNote",SOURCEANDHIGHLIGHT:"sourceAndHighlight",PURENOTE:"pureNote",NEITHER:"neither"},l=(r={NULL:null},Object(Ie.a)(r,s.PURESOURCE,"#00c0de"),Object(Ie.a)(r,s.SOURCEANDNOTE,"#f36170"),Object(Ie.a)(r,s.SOURCEANDHIGHLIGHT,"#45c786"),Object(Ie.a)(r,s.PURENOTE,"#f5a94b"),Object(Ie.a)(r,s.NEITHER,"#000000"),r);return n.state={network:null,visNodes:null,selectedItem:null,items:null,nonSelectedNodes:null,clusters:null,loading:!1,showNewItemForm:!1,showNewItemHelperMessage:!1,newItemData:o.NULL,modes:o,newItemFormType:null,item:null,types:s,nodeColors:l,showColor:l.NULL,showNewClusterForm:!1,showNewClusterHelperMessage:!1,showAddToClusterHelperMessage:!1,stationaryClusterItemData:null,newClusterIds:null,existingClusterId:null,curClusterView:JSON.parse(localStorage.getItem("curClusterView")),showRemoveItemFromClusterMessage:!1,raiseLevelButtonHover:!1},n}return Object(ne.a)(a,[{key:"generateNodePositions",value:function(e){return[Math.floor(2*Math.random()*300-300)+0,Math.floor(2*Math.random()*300-300)+0]}},{key:"createNodes",value:function(){var e=this,t=new Ne.a,a=function(a){if(0===e.state.clusters.length||0===e.state.clusters.filter((function(t){return t.project_id===e.props.curProject.id})).filter((function(t){return t.child_items.some((function(t){return t.id===e.state.items[a].id}))})).length){var r=e.state.items[a],n=e.getNodeType(r),o=e.getNodeLabel(r,n),s=e.getNodePosition(r),l=Object(c.a)(s,2),i=l[0],u=l[1];t.add({group:"items",id:r.id,label:o,x:i,y:u,color:e.getColor(r)})}};for(var r in this.state.items)a(r);return this.setState({visNodes:t}),t}},{key:"createClusters",value:function(){var e=this,t=new Ne.a;return 0===this.state.clusters.length||this.state.clusters.forEach((function(a){t.add({group:"clusters",id:e.generateVisClusterId(a),label:"-----------------------------------------------------",x:a.x_position,y:a.y_position});if(t.add({group:"inCluster",id:e.generateVisInClusterId(a,"title"),label:a.name,x:a.x_position,y:a.y_position-120,font:{color:"black",size:18},color:{background:"#ffffff",border:"#00c0de"}}),a.total_items>2){var r=a.total_items-2;t.add({group:"inCluster",id:e.generateVisInClusterId(a,"count"),label:"+"+r+" item"+(r>1?"s":""),x:a.x_position,y:a.y_position+120,font:{color:"black",size:18},color:{background:"rgba(0, 0, 0, 0)",border:"rgba(0, 0, 0, 0)"}})}var n=0;a.child_items.forEach((function(r){var o=e.getNodeType(r),s=e.getNodeLabel(r,o),l=-40;1===n&&(l=40),n>1||(t.add({group:"inCluster",id:e.generateVisInClusterId(a,"item",r),label:s,x:a.x_position,y:a.y_position+l,widthConstraint:{maximum:170},color:e.getColor(r)}),n++)}))})),t}},{key:"componentDidUpdate",value:function(e,t,a){e.curProject!==this.props.curProject&&(this.setState({items:null},this.renderNetwork),this.setCurClusterView(null)),t.showNewItemHelperMessage!==this.state.showNewItemHelperMessage&&(this.state.showNewItemHelperMessage?R.a.info("Click on an empty space to add your new item.",0,this.disableEditMode):R.a.close()),e.searchQuery===this.props.searchQuery&&e.filters===this.props.filters||this.renderNetwork(null),t.showNewClusterHelperMessage!==this.state.showNewClusterHelperMessage&&(this.state.showNewClusterHelperMessage?R.a.info("Release to create new cluster.",0,this.disableEditMode):R.a.close()),t.showAddToClusterHelperMessage!==this.state.showAddToClusterHelperMessage&&(this.state.showAddToClusterHelperMessage?R.a.info("Release to add to cluster.",0,this.disableEditMode):R.a.close()),t.showRemoveItemFromClusterMessage!==this.state.showRemoveItemFromClusterMessage&&(this.state.showRemoveItemFromClusterMessage?R.a.info("Release to move node to previous level.",0,this.disableEditMode):R.a.close()),t.showNewClusterForm!==this.state.showNewClusterForm&&this.state.showNewClusterForm&&R.a.close(),t.curClusterView!==this.state.curClusterView&&(localStorage.setItem("curClusterView",JSON.stringify(this.state.curClusterView)),this.setState({items:null,clusters:null},this.renderNetwork))}},{key:"componentDidMount",value:function(){null===this.state.curClusterView&&localStorage.setItem("curClusterView",JSON.stringify(null)),this.renderNetwork()}},{key:"render",value:function(){var e=this;return null===this.props.curProject||this.state.loading&&(null===this.state.items||null===this.state.clusters)?n.a.createElement(J.a,{size:"lg",backdrop:!0,center:!0}):n.a.createElement("div",{style:{position:"relative",height:"93.5%"}},n.a.createElement("div",{id:"mindmap"}),n.a.createElement(ct,{curProject:this.props.curProject,items:this.state.items,color:this.getColor,network:this.state.network}),n.a.createElement(Ae,{selectedItem:this.state.selectedItem,setSelectedItem:this.setSelectedItem,getSelectedItemDetails:this.getSelectedItemDetails,renderNetwork:this.renderNetwork,setAddItemMode:this.setAddItemMode,getNodeType:this.getNodeType,nodeTypes:this.state.types}),n.a.createElement(_e,{showNewItemForm:this.state.showNewItemForm,curProject:this.props.curProject,renderNetwork:this.renderNetwork,switchShowNewItemForm:this.switchShowNewItemForm,inputType:this.state.newItemFormType,newItemData:this.state.newItemData,item:this.state.item,parentCluster:this.state.curClusterView}),n.a.createElement(He,{showNewClusterForm:this.state.showNewClusterForm,stationaryClusterItemData:this.state.stationaryClusterItemData,curProject:this.props.curProject,renderNetwork:this.renderNetwork,newClusterIds:this.state.newClusterIds,switchShowNewClusterForm:this.switchShowNewClusterForm,disableEditMode:this.disableEditMode}),n.a.createElement(Ke,{showBib:this.props.showBib,setShowBib:this.props.setShowBib,curProject:this.props.curProject,curCluster:this.state.curClusterView}),n.a.createElement(Xe,{showSharedProject:this.props.showSharedProject,setShowSharedProject:this.props.setShowSharedProject,curProject:this.props.curProject,updateProjects:this.props.updateProjects}),n.a.createElement(dt,{curClusterView:this.state.curClusterView,setCurClusterView:this.setCurClusterView}),n.a.createElement("div",{onMouseOver:function(){return e.setState({raiseLevelButtonHover:!0})},onMouseOut:function(){return e.setState({raiseLevelButtonHover:!1})}},n.a.createElement(ut,{curClusterView:this.state.curClusterView,setCurClusterView:this.setCurClusterView})),n.a.createElement(Re,{fit:this.fitNetworkToScreen,setAddItemMode:this.setAddItemMode}))}}]),a}(n.a.Component),ht=(a(478),a(479),function(e){Object(oe.a)(a,e);var t=Object(se.a)(a);function a(e){var r;Object(re.a)(this,a),(r=t.call(this,e)).updateProjects=function(e){H("/projects").then((function(t){t.body.success||r.setShowNewProjectModal(!0);var a=t.body.projects;r.setState({projects:a},(function(){r.state.curProject?r.setCurProject(r.state.curProject.id):a&&a.length>0?r.setState({curProject:a[0]}):a&&0!==a.length||(r.setCurProject(null),r.setShowNewProjectModal(!0)),"function"===typeof e&&e()}))}))},r.switchShowProjectsSidebar=function(){r.setState({showProjectsSidebar:!r.state.showProjectsSidebar})},r.setCurProject=function(e){if(null===e)r.setState({curProject:null});else{var t=r.state.projects.find((function(t){return t.id===e}));r.setState({curProject:t})}},r.projectsButton=function(){return n.a.createElement(K.a,{appearance:"primary",id:"projects-sidebar-btn",onClick:r.switchShowProjectsSidebar},"Your",n.a.createElement("br",null),"Projects")},r.setShowBib=function(e){r.setState({showBib:e})},r.setShowNewProjectModal=function(e){r.setState({showNewProjectModal:e})},r.setSearchQuery=function(e){r.setState({searchQuery:e}),r.props.onInput&&r.props.onInput({searchQuery:e})},r.updateFilters=function(e){r.setState({filters:e})},r.setShowSharedProject=function(e){r.setState({showSharedProject:e})};return r.state={curProjectKey:"curProject",curProject:JSON.parse(localStorage.getItem("curProject")),projects:null,showProjectsSidebar:!1,showBib:!1,showSharedProject:!1,showNewProjectModal:!1,searchQuery:"",filters:["Title","URL","Page Content","Highlights","Notes"]},r}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.updateProjects()}},{key:"componentDidUpdate",value:function(e,t,a){var r=this;if(t.curProject!==this.state.curProject){if(!this.state.curProject){var n=null;this.state.projects&&this.state.projects.length>0?n=this.state.projects[0]:this.setShowNewProjectModal(!0),this.setState({curProject:n},(function(){return localStorage.setItem(r.state.curProjectKey,JSON.stringify(r.state.curProject))}))}}}},{key:"render",value:function(){return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement(he,{curProject:this.state.curProject,setShowBib:this.setShowBib,searchQuery:this.state.searchQuery,setSearchQuery:this.setSearchQuery,updateFilters:this.updateFilters}),n.a.createElement(Se,{show:this.state.showProjectsSidebar,curProject:this.state.curProject,projects:this.state.projects,setShowSharedProject:this.setShowSharedProject,close:this.switchShowProjectsSidebar,updateProjects:this.updateProjects,setCurProject:this.setCurProject}),this.projectsButton(),n.a.createElement(pt,{curProject:this.state.curProject,showBib:this.state.showBib,setShowBib:this.setShowBib,searchQuery:this.state.searchQuery,filters:this.state.filters,setShowSharedProject:this.setShowSharedProject,showSharedProject:this.state.showSharedProject,updateProjects:this.updateProjects}),n.a.createElement(q,{show:this.state.showNewProjectModal,setShow:this.setShowNewProjectModal,noCancel:!0,fromSidebar:!0}))}}]),a}(n.a.Component)),ft=Object(v.c)(ht,{onRedirecting:function(){return n.a.createElement(J.a,{size:"lg",backdrop:!0,center:!0})}}),gt=function(e){var t=e.children,a=Object(i.f)();return n.a.createElement(v.a,{domain:"knolist.us.auth0.com",clientId:"pBu5uP4mKTQgBttTW13N0wCVgsx90KMi",redirectUri:window.location.origin,onRedirectCallback:function(e){a.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"knolist"},t)};s.a.render(n.a.createElement("div",{style:{position:"absolute",bottom:0,top:0,width:"100%"}},n.a.createElement(l.a,null,n.a.createElement(i.c,null,n.a.createElement(gt,null,n.a.createElement(i.a,{exact:!0,path:"/"},n.a.createElement(ft,null)),n.a.createElement(i.a,{path:"/my-projects"},n.a.createElement(Z,{url:"/my-projects"})),n.a.createElement(i.a,{path:"/shared"},n.a.createElement(Z,{url:"/shared"})),n.a.createElement(i.a,{path:"/archived"},n.a.createElement(Z,{url:"/archived"})),n.a.createElement(i.a,{path:"/settings"},n.a.createElement(ae,null)))))),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.55855b86.chunk.js.map