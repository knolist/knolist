(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,a){e.exports=a.p+"static/media/horizontal_main.7429f5ff.png"},289:function(e,t,a){e.exports=a(480)},479:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(50),s=a.n(o),l=a(24),i=a(16),c=a(30),u=a(103),d=a.n(u),m=a(483),p=a(285),h=a(31);var f=function(e){return r.a.createElement(m.a,{style:{width:e.width}},r.a.createElement(p.a,{placeholder:"Search through your project",value:e.searchQuery,onInput:function(t){return e.setSearchQuery(t.target.value)}}),r.a.createElement(m.a.Button,null,r.a.createElement(h.a,{icon:"search"})))},g=a(484),E=a(502),w=a(494),y=a(80);var v=function(e){var t=Object(y.b)().logout;return e.showSearch?r.a.createElement(g.a,{style:{padding:"0 10px",borderBottom:".1px solid #ededf0"}},r.a.createElement(E.a,{justify:"space-between",align:"middle"},r.a.createElement(l.b,{to:"/my-projects"},r.a.createElement(g.a.Header,null,r.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),r.a.createElement(E.a.Item,{colspan:13},r.a.createElement(E.a,null,r.a.createElement(E.a.Item,null,r.a.createElement(f,{width:"40vw",setSearchQuery:e.setSearchQuery})),r.a.createElement(E.a.Item,null,r.a.createElement(w.a,{title:"Sort by: "+e.sortCriterion,activeKey:e.sortCriterion},r.a.createElement(w.a.Item,{eventKey:"Newest",onSelect:function(){return e.setSortCriterion("Newest")}},"Newest"),r.a.createElement(w.a.Item,{eventKey:"Oldest",onSelect:function(){return e.setSortCriterion("Oldest")}},"Oldest"),r.a.createElement(w.a.Item,{eventKey:"A-Z",onSelect:function(){return e.setSortCriterion("A-Z")}},"A-Z"),r.a.createElement(w.a.Item,{eventKey:"Z-A",onSelect:function(){return e.setSortCriterion("Z-A")}},"Z-A"))))),r.a.createElement(E.a.Item,null,r.a.createElement(w.a,{noCaret:!0,icon:r.a.createElement(h.a,{icon:"user",size:"lg"}),placement:"bottomEnd"},r.a.createElement(l.b,{to:"/settings"},r.a.createElement(w.a.Item,{componentClass:"span",className:"react-router-styling"},"Settings")),r.a.createElement(w.a.Item,{onClick:function(){t({returnTo:window.location.origin})}},"Log out"))))):r.a.createElement(g.a,{style:{padding:"0 10px",borderBottom:".1px solid #ededf0"}},r.a.createElement(E.a,{justify:"space-between",align:"middle"},r.a.createElement(l.b,{to:"/my-projects"},r.a.createElement(g.a.Header,null,r.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),r.a.createElement(E.a.Item,null,r.a.createElement(w.a,{noCaret:!0,icon:r.a.createElement(h.a,{icon:"user",size:"lg"}),placement:"bottomEnd"},r.a.createElement(l.b,{to:"/settings"},r.a.createElement(w.a.Item,{componentClass:"span"},"Settings")),r.a.createElement(w.a.Item,{onClick:function(){t({returnTo:window.location.origin})}},"Log out")))))},b=a(486),C=a(496);var j=function(){var e=!1,t=!1,a=!1,n=Object(i.g)().pathname;return"/my-projects"===n?e=!0:"/shared"===n?t=!0:"/archived"===n&&(a=!0),r.a.createElement("div",{style:{width:"17vw"}},r.a.createElement(b.a,{style:{height:"100vh",fontFamily:"Poppins",paddingTop:"3vh",paddingLeft:"1vh"}},r.a.createElement(b.a.Body,null,r.a.createElement(C.a,null,r.a.createElement(l.b,{to:"/my-projects",className:"react-router-styling"},r.a.createElement(C.a.Item,{active:e,icon:r.a.createElement(h.a,{icon:"project"}),componentClass:"span"},"My Projects")),r.a.createElement(l.b,{to:"/shared",className:"react-router-styling"},r.a.createElement(C.a.Item,{active:t,icon:r.a.createElement(h.a,{icon:"people-group"}),componentClass:"span"},"Shared with me")),r.a.createElement(l.b,{to:"/archived",className:"react-router-styling"},r.a.createElement(C.a.Item,{active:a,icon:r.a.createElement(h.a,{icon:"archive"}),componentClass:"span"},"Archived"))))))},I=a(504),S=a(503);var N=function(e){var t=function(e){localStorage.setItem("curProject",JSON.stringify(e))},a="";return null!=e.data.description&&(a=e.data.description),e.data.shared_users.length>0?r.a.createElement(l.b,{to:"/",style:{textDecoration:"none"},className:"react-router-styling"},r.a.createElement(S.a,{shaded:!0,bordered:!0,header:e.data.title,style:{width:"17vw",marginTop:"2vh"},onClick:function(){return t(e.data)}},e.data.id,r.a.createElement(h.a,{icon:"people-group",style:{float:"right",marginTop:"5px"}}))):r.a.createElement(l.b,{to:"/",style:{textDecoration:"none"},className:"react-router-styling"},r.a.createElement(S.a,{shaded:!0,bordered:!0,header:e.data.title,style:{width:"17vw",marginTop:"2vh"},onClick:function(){return t(e.data)}},a))};var k=function(e){return e.show&&e.projects.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"myknolist-title"},"Recent"),r.a.createElement("div",{className:"myknolist-container"},r.a.createElement(E.a,{style:{marginLeft:"-6px",marginBottom:"5vh"},justify:"start"},function(e){e.sort((function(e,t){return Date.parse(t.recent_access_date)-Date.parse(e.recent_access_date)}));for(var t=[],a=e.length>=4?4:e.length,n=0;n<a;n++)t.push(e[n]);return t}(e.projects).map((function(e,t){return r.a.createElement(E.a.Item,{componentClass:I.a,md:6,key:t},r.a.createElement(N,{data:e}))}))))):null};var P=function(e){var t=function(t){var a=null;if(e.sharedOnly||e.archivedOnly){if(e.sharedOnly)a=t.filter((function(e){return e.shared_users.length>0}));else if(e.archivedOnly)return[]}else a=t;if(""!==e.searchQuery){for(var n=[],r=0;r<a.length;r++)a[r].title.toLowerCase().includes(e.searchQuery.toLowerCase())&&n.push(a[r]);a=n}switch(e.sortCriterion){case"Oldest":a.sort((function(e,t){return Date.parse(e.creation_date)-Date.parse(t.creation_date)}));break;case"Newest":a.sort((function(e,t){return Date.parse(t.creation_date)-Date.parse(e.creation_date)}));break;case"A-Z":a.sort((function(e,t){return e.title.localeCompare(t.title)}));break;case"Z-A":a.sort((function(e,t){return t.title.localeCompare(e.title)}))}return a}(e.projects);return t.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"myknolist-title"},"All"),r.a.createElement("div",{className:"myknolist-container"},r.a.createElement(E.a,{style:{marginLeft:"-6px",marginBottom:"5vh"},justify:"start"},t.map((function(e,t){return r.a.createElement(E.a.Item,{componentClass:I.a,md:6,key:t},r.a.createElement(N,{data:e}))}))))):0===t.length&&""===e.searchQuery?r.a.createElement("div",null,r.a.createElement("div",{style:{fontWeight:"bold",fontSize:"2em",fontFamily:"Poppins"}},"No projects!"),r.a.createElement("div",{style:{fontSize:"1em",fontFamily:"Poppins",marginTop:"15px"}},"Add a new project to get started.")):r.a.createElement("div",{className:"myknolist-title"},"All")},O=a(286);var D=function(){return r.a.createElement(O.a,{className:"footer-btn",appearance:"primary",icon:r.a.createElement(h.a,{icon:"plus"}),circle:!0,size:"lg"})},T=a(26),x=a.n(T),F=a(48),A=a(265),M=null,L="http://localhost:5000";function _(e,t,a){var n=e+"?query="+t;return 0!==a.length&&a.forEach((function(e){"Page Content"===e&&(e="content"),n=n+"&filter="+e.toLowerCase()})),n}function B(){return(B=Object(F.a)(x.a.mark((function e(t){var a,n,r,o,s,l,i,c,u,d,m=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:"GET",n=m.length>2&&void 0!==m[2]?m[2]:{},e.next=4,Object(A.a)({domain:"knolist.us.auth0.com",client_id:"pBu5uP4mKTQgBttTW13N0wCVgsx90KMi",audience:"knolist"});case 4:return M=e.sent,e.next=7,M.getTokenSilently();case 7:return r=e.sent,o=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),s=o&&-1!==navigator.userAgent.indexOf("Edg"),o&&!s?chrome.runtime.sendMessage("aecilhpeobjkojfhceiggceeadpndelj",{jwt:r},(function(e){console.log("got response "+e)})):console.log("Not Chrome"),l=L+t,(i={}).headers={Authorization:"Bearer "+r},Object.keys(n).length>0&&(i.headers["Content-Type"]="application/json",i.body=JSON.stringify(n)),"GET"!==a&&(i.method=a),e.next=18,fetch(l,i);case 18:return c=e.sent,u=c.status,e.next=22,c.json();case 22:return d=e.sent,e.abrupt("return",{status:u,body:d});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){return B.apply(this,arguments)},R=a(487),V=a(505),U=a(488),z=a(506),Q=a(497),G=a(507),W=a(51);var K=function(e){var t=e.show,a=e.setShow,n=Object(i.f)();return r.a.createElement(R.a,{show:t,style:{overflow:"hidden"},onHide:function(){return a(!1)}},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"New Project")),r.a.createElement(R.a.Body,null,r.a.createElement(V.a,{fluid:!0},r.a.createElement(U.a,{controlId:"titleInput"},r.a.createElement(z.a,null,"Title"),r.a.createElement(Q.a,{name:"title"}),r.a.createElement(G.a,null,"Required")),r.a.createElement(U.a,{controlId:"descriptionInput"},r.a.createElement(z.a,null,"Description"),r.a.createElement(Q.a,{rows:5,name:"description",componentClass:"textarea"})))),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{onClick:function(){a(!1),function(){var t=document.getElementById("titleInput").value,a=document.getElementById("descriptionInput").value;H("/projects","POST",null==a||""===a?{title:t}:{title:t,description:a}).then((function(t){localStorage.setItem("curProject",JSON.stringify(t.body.project)),e.fromSidebar?n.go(0):n.push("/")}))}()},appearance:"primary"},"Create"),r.a.createElement(W.a,{onClick:function(){return a(!1)},appearance:"default"},"Cancel")))},J=a(508);var Y=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(null),i=Object(c.a)(l,2),u=i[0],d=i[1],m=Object(n.useState)(!1),p=Object(c.a)(m,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){h||(H("/projects").then((function(e){return d(e.body.projects)})),f(!0))})),null!==u?r.a.createElement("div",{id:"myknolist-main-container"},r.a.createElement(k,{show:e.showRecent,projects:u}),r.a.createElement(P,{projects:u,sharedOnly:e.sharedOnly,archivedOnly:e.archivedOnly,sortCriterion:e.sortCriterion,searchQuery:e.searchQuery}),r.a.createElement("div",{style:{position:"fixed",right:0,bottom:0},onClick:function(){return s(!0)}},r.a.createElement(D,null)),r.a.createElement(K,{show:o,setShow:s,fromSidebar:!1})):r.a.createElement(J.a,{size:"lg",center:!0})};var q=function(e){var t=!1,a=!1,o=!1;"/my-projects"===e.url&&(t=!0),"/shared"===e.url&&(a=!0),"/archived"===e.url&&(o=!0);var s=Object(n.useState)(""),l=Object(c.a)(s,2),i=l[0],u=l[1],d=Object(n.useState)(""),m=Object(c.a)(d,2),p=m[0],h=m[1];return""!==p&&(t=!1),r.a.createElement("div",null,r.a.createElement(v,{setSortCriterion:u,sortCriterion:i,setSearchQuery:h,showSearch:!0}),r.a.createElement(j,null),r.a.createElement(Y,{showRecent:t,sharedOnly:a,archivedOnly:o,sortCriterion:i,searchQuery:p}))},Z=a(509),X=a(510),$=a(287),ee=a(511);var te=function(){var e=Object(n.useState)("Medium"),t=Object(c.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement(v,{showSearch:!1}),r.a.createElement(j,null),r.a.createElement("div",{id:"myknolist-main-container"},r.a.createElement("div",{style:{width:"50%"}},r.a.createElement(Z.a,null,r.a.createElement(X.a,null,r.a.createElement(I.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Full Name"),r.a.createElement(I.a,{xs:6},r.a.createElement(p.a,{placeholder:"John Doe"}))),r.a.createElement(X.a,{style:{marginTop:"2vh"}},r.a.createElement(I.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Email"),r.a.createElement(I.a,{xs:6},r.a.createElement(p.a,{placeholder:"johndoe@gmail.com"}))),r.a.createElement(X.a,{style:{marginTop:"2vh"}},r.a.createElement(I.a,{xs:2,style:{paddingTop:"1vh",fontWeight:"bold"}},"Password"),r.a.createElement(I.a,{xs:6},r.a.createElement(W.a,{appearance:"default",size:"sm"},"Change"))),r.a.createElement($.a,null),r.a.createElement(X.a,{style:{marginTop:"2vh"}},r.a.createElement(I.a,{xs:2,style:{paddingTop:".5vh",fontWeight:"bold"}},"Dark Mode"),r.a.createElement(I.a,{xs:6},r.a.createElement(ee.a,null))),r.a.createElement(X.a,{style:{marginTop:"2vh"}},r.a.createElement(I.a,{xs:2,style:{paddingTop:"1.1vh",fontWeight:"bold"}},"Text Size"),r.a.createElement(I.a,{xs:6},r.a.createElement(w.a,{title:a,appearance:"default"},r.a.createElement(w.a.Item,{onSelect:function(){return o("Small")}},"Small"),r.a.createElement(w.a.Item,{onSelect:function(){return o("Medium")}},"Medium"),r.a.createElement(w.a.Item,{onSelect:function(){return o("Large")}},"Large"))))),r.a.createElement(W.a,{style:{marginTop:"4vh"},appearance:"primary"},"Save"))))},ae=a(10),ne=a(11),re=a(13),oe=a(12),se=a(132),le=a(152),ie=a(500),ce=a(489);var ue=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){return Object(ae.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a.Item,null,r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Bibliography"),placement:"bottomEnd"},r.a.createElement(O.a,{onClick:function(){return e.props.setShowBib(!0)},icon:r.a.createElement(h.a,{icon:"book"})})))}}]),a}(r.a.Component),de=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;Object(ae.a)(this,a),(n=t.call(this,e)).handleCheckAll=function(e,t){var a=t?n.state.filterCategories:[];n.setState({value:a,indeterminate:!1,checkAll:t}),n.sendFilters(a)},n.handleChange=function(e){n.setState({value:e,indeterminate:e.length>0&&e.length<n.state.filterCategories.length,checkAll:e.length===n.state.filterCategories.length}),n.sendFilters(e)},n.sendFilters=function(e){n.props.updateFilters(e)};var r=["Title","URL","Page Content","Highlights","Notes"];return n.state={indeterminate:!1,checkAll:!0,value:r,filterCategories:r},n}return Object(ne.a)(a,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(E.a.Item,null,r.a.createElement(f,{width:250,searchQuery:this.props.searchQuery,setSearchQuery:this.props.setSearchQuery,updateFilters:this.props.updateFilters})),r.a.createElement(E.a.Item,null,r.a.createElement(me,{indeterminate:this.state.indeterminate,checkAll:this.state.checkAll,value:this.state.value,filterCategories:this.state.filterCategories,handleCheckAll:this.handleCheckAll,handleChange:this.handleChange})))}}]),a}(r.a.Component);function me(e){return r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Search Filters"),placement:"bottomEnd"},r.a.createElement(w.a,{placement:"bottomEnd",renderTitle:function(){return r.a.createElement(O.a,{icon:r.a.createElement(h.a,{icon:"filter"})})}},r.a.createElement("div",{style:{width:200}},r.a.createElement(ie.a,{indeterminate:e.indeterminate,checked:e.checkAll,onChange:e.handleCheckAll},"Select all"),r.a.createElement($.a,{style:{margin:"5px 0"}}),r.a.createElement(ce.a,{name:"checkboxList",value:e.value,onChange:e.handleChange},e.filterCategories.map((function(e){return r.a.createElement(ie.a,{key:e,value:e},e)}))))))}var pe=function(e){return r.a.createElement(g.a,{style:{padding:"0 10px"}},r.a.createElement(E.a,{justify:"space-between",align:"middle"},r.a.createElement(l.b,{to:"/my-projects"},r.a.createElement(g.a.Header,null,r.a.createElement("img",{className:"limit-height",src:d.a,alt:"Knolist"}))),r.a.createElement(E.a.Item,null,null===e.curProject?null:r.a.createElement("span",{style:{fontWeight:"bold",fontSize:"2em"}},e.curProject.title)),r.a.createElement(E.a.Item,null,r.a.createElement(E.a,null,r.a.createElement(de,{searchQuery:e.searchQuery,setSearchQuery:e.setSearchQuery,updateFilters:e.updateFilters}),r.a.createElement(ue,{setShowBib:e.setShowBib})))))},he=a(495),fe=a(501),ge=a(512);var Ee=function(e){return r.a.createElement(R.a,{backdrop:"static",show:e.confirmDelete,onHide:e.resetDelete,size:"xs"},r.a.createElement(R.a.Body,null,r.a.createElement(h.a,{icon:"remind",style:{color:"#ffb300",fontSize:24}}),"  ",'Are you sure you want to delete "',e.title,'"?',r.a.createElement("br",null),r.a.createElement("b",null,"This action cannot be undone.")),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{onClick:e.delete,appearance:"primary",loading:e.loading},"Delete"),r.a.createElement(W.a,{onClick:e.resetDelete,appearance:"default"},"Cancel")))};var we=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.setEditing=function(e){n.setState({editing:e})},n.cancelEditing=function(e){null!==e.relatedTarget&&e.relatedTarget.id===n.state.updateProjectNameButtonId||n.setEditing(!1)},n.setDeleteProject=function(e){e.stopPropagation(),n.setState({confirmDelete:!0})},n.resetDeleteProject=function(){n.setState({confirmDelete:!1})},n.deleteProject=function(){n.setLoading(!0);var e="/projects/"+n.props.project.id;H(e,"DELETE").then((function(){var e;n.props.active&&(e=function(){return n.props.setCurProject(null)}),n.props.updateProjects(e)}))},n.updateProjectName=function(){n.setLoading(!0);var e=function(e){for(var t=0,a=e.length-1;t<e.length&&" "===e[t];)t++;for(;a>t&&" "===e[a];)a-=1;return e.substring(t,a+1)}(document.getElementById(n.state.updatedProjectNameFormId).value),t="/projects/"+n.props.project.id;H(t,"PATCH",{title:e}).then((function(){n.props.updateProjects((function(){n.setEditing(!1),n.setLoading(!1)}))}))},n.state={confirmDelete:!1,loading:!1,editing:!1,updatedProjectNameFormId:"updated-project-name",updateProjectNameButtonId:"update-project-name-button"},n}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ee,{confirmDelete:this.state.confirmDelete,resetDelete:this.resetDeleteProject,title:this.props.project.title,delete:this.deleteProject,loading:this.state.loading}),r.a.createElement(C.a.Item,{onSelect:this.props.onSelect,eventKey:this.props.eventKey,active:this.props.active},r.a.createElement(E.a,{justify:"space-between"},r.a.createElement(E.a.Item,null,this.state.editing?r.a.createElement(V.a,{onSubmit:this.updateProjectName},r.a.createElement(p.a,{autoFocus:!0,required:!0,id:this.state.updatedProjectNameFormId,onClick:function(e){return e.stopPropagation()},onBlur:function(t){return e.cancelEditing(t)},defaultValue:this.props.project.title})):this.props.project.title),r.a.createElement(E.a.Item,null,r.a.createElement(ge.a,null,r.a.createElement(ye,{loading:this.state.loading,editing:this.state.editing,updateProjectNameButtonId:this.state.updateProjectNameButtonId,setEditing:this.setEditing,updateProjectName:this.updateProjectName}),r.a.createElement(O.a,{onClick:this.setDeleteProject,icon:r.a.createElement(h.a,{icon:"trash"}),size:"sm"}),r.a.createElement(ve,{isShared:this.props.project.shared_users.length>0,setShowSharedProject:this.props.setShowSharedProject}))))))}}]),a}(r.a.Component),ye=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).buttonAction=function(t,a){t.stopPropagation(),a?e.props.setEditing(a):e.props.updateProjectName()},e}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return this.props.editing?r.a.createElement(W.a,{id:this.props.updateProjectNameButtonId,loading:this.props.loading,onClick:function(t){return e.buttonAction(t,!1)}},"Update"):r.a.createElement(O.a,{onClick:function(t){return e.buttonAction(t,!0)},icon:r.a.createElement(h.a,{icon:"edit2"}),size:"sm"})}}]),a}(r.a.Component),ve=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){t.stopPropagation(),e.props.setShowSharedProject(!0)},e}return Object(ne.a)(a,[{key:"render",value:function(){var e;return e=this.props.isShared?"share-alt":"people-group",r.a.createElement(O.a,{onClick:this.handleClick,icon:r.a.createElement(h.a,{icon:e}),size:"sm"})}}]),a}(r.a.Component),be=function(e){return r.a.createElement(C.a,{vertical:!0,activeKey:null===e.curProject?void 0:e.curProject.id,onSelect:function(t){return e.setCurProject(t)}},e.projects.map((function(t){return r.a.createElement(we,{key:t.id,updateProjects:e.updateProjects,project:t,eventKey:t.id,setCurProject:e.setCurProject,setShowSharedProject:e.setShowSharedProject})})))};function Ce(e){return r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"New Project"),placement:"topEnd"},r.a.createElement(O.a,{onClick:function(){return e.setShowNewProjectForm(!0)},appearance:"primary",icon:r.a.createElement(h.a,{icon:"plus"}),circle:!0,size:"lg"}))}var je=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setShowNewProjectForm=function(e){n.setState({showNewProjectForm:e})},n.renderProjectsList=function(){return null===n.props.projects?r.a.createElement(he.a.Paragraph,{rows:15,active:!0}):r.a.createElement(be,{projects:n.props.projects,curProject:n.props.curProject,updateProjects:n.props.updateProjects,setCurProject:n.props.setCurProject,setShowSharedProject:n.props.setShowSharedProject})},n.state={showNewProjectForm:!1},n}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.props.updateProjects()}},{key:"componentDidUpdate",value:function(e,t,a){e.show===this.props.show||this.props.show||this.setShowNewProjectForm(!1)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(fe.a,{size:"xs",show:this.props.show,onHide:this.props.close},r.a.createElement(fe.a.Header,null,r.a.createElement(fe.a.Title,null,"Your Projects")),r.a.createElement(fe.a.Body,{style:{marginBottom:10}},this.renderProjectsList()),r.a.createElement(fe.a.Footer,null,r.a.createElement(Ce,{setShowNewProjectForm:this.setShowNewProjectForm,showNewProjectForm:this.state.showNewProjectForm}))),r.a.createElement(K,{show:this.state.showNewProjectForm,setShow:this.setShowNewProjectForm,fromSidebar:!0}))}}]),a}(r.a.Component),Ie=a(90),Se=a(498),Ne=a(61),ke=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setConfirmDelete=function(e){n.setState({confirmDelete:e},(function(){return n.setLoadingDelete(!1)}))},n.setLoadingDelete=function(e){n.setState({loadingDelete:e})},n.deleteItem=function(){n.setLoadingDelete(!0);var e="/items/"+n.props.selectedItem.id;H(e,"DELETE").then((function(){n.props.renderNetwork((function(){n.setConfirmDelete(!1),n.close()}))}))},n.addNewNote=function(){n.props.setAddItemMode("Note",n.props.selectedItem.url),n.close()},n.close=function(){n.props.setSelectedItem(null)},n.generateItemBody=function(e,t,a){var o=r.a.createElement("div",null);return t===a.SOURCEANDNOTE?o=r.a.createElement(De,{item:e,getSelectedItemDetails:n.props.getSelectedItemDetails,renderNetwork:n.props.renderNetwork}):t===a.SOURCEANDHIGHLIGHT?o=r.a.createElement(Oe,{item:e,getSelectedItemDetails:n.props.getSelectedItemDetails,renderNetwork:n.props.renderNetwork}):t===a.PURENOTE?o=r.a.createElement(Pe,{item:e,getSelectedItemDetails:n.props.getSelectedItemDetails,renderNetwork:n.props.renderNetwork}):t===a.PURESOURCE&&(o=r.a.createElement(Te,{item:e,getSelectedItemDetails:n.props.getSelectedItemDetails,renderNetwork:n.props.renderNetwork})),o},n.state={confirmDelete:!1,loadingDelete:!1},n}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;if(null===this.props.selectedItem)return null;var t=this.props.selectedItem,a=this.props.getNodeType(t),n=this.props.nodeTypes;return r.a.createElement("div",null,r.a.createElement(Ee,{confirmDelete:this.state.confirmDelete,resetDelete:function(){return e.setConfirmDelete(!1)},title:t.title,delete:this.deleteItem,loading:this.state.loadingDelete}),r.a.createElement(R.a,{size:"md",show:!0,onHide:this.close},this.generateItemBody(t,a,n),r.a.createElement(R.a.Footer,null,r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Delete Item"),placement:"bottom"},r.a.createElement(O.a,{onClick:function(){return e.setConfirmDelete(!0)},icon:r.a.createElement(h.a,{icon:"trash"}),size:"lg"})),r.a.createElement(W.a,{appearance:"primary",onClick:this.addNewNote},"Add New Note"))))}}]),a}(r.a.Component);function Pe(e){return r.a.createElement("div",null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,e.item.content.substring(0,100))),r.a.createElement(R.a.Body,null,r.a.createElement(Fe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork})))}function Oe(e){return r.a.createElement("div",null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,r.a.createElement(xe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),r.a.createElement(R.a.Body,null,e.item.content))}function De(e){return r.a.createElement("div",null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,r.a.createElement(xe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),r.a.createElement(R.a.Body,null,r.a.createElement(Fe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork})))}function Te(e){return r.a.createElement("div",null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,r.a.createElement(xe,{item:e.item,getSelectedItemDetails:e.getSelectedItemDetails,renderNetwork:e.renderNetwork}))),r.a.createElement(R.a.Body,null))}var xe=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.updateTitle=function(e){var t=document.getElementById(n.state.newSourceTitleInputId).value;if(t!==n.props.item.title){n.setLoading(!0);var a="/items/"+n.props.item.id;H(a,"PATCH",{title:t}).then((function(){n.props.renderNetwork((function(){n.props.getSelectedItemDetails().then((function(){n.setLoading(!1),e()}))}))}))}else e()},n.setEditMode=function(e){e?n.setState({editMode:e}):n.updateTitle((function(){return n.setState({editMode:e})}))},n.renderTitle=function(){return n.state.editMode?r.a.createElement(p.a,{style:{width:400,marginRight:10},defaultValue:n.props.item.title,id:n.state.newSourceTitleInputId,autoFocus:!0,required:!0}):r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",style:{marginRight:10},href:n.props.item.url},n.props.item.title)},n.state={editMode:!1,loading:!1,newSourceTitleInputId:"new-source-title-input"},n}return Object(ne.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex"}},this.renderTitle(),r.a.createElement(Ae,{hide:!1,editMode:this.state.editMode,loading:this.state.loading,setEditMode:this.setEditMode,tooltipText:"Rename"}))}}]),a}(r.a.Component),Fe=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.updateContent=function(e){var t=document.getElementById(n.state.noteContentId).value;if(t!==n.props.item.content){n.setLoading(!0);var a="/items/"+n.props.item.id;H(a,"PATCH",{content:t}).then((function(){n.props.renderNetwork((function(){n.props.getSelectedItemDetails().then((function(){n.setLoading(!1),e()}))}))}))}else e()},n.setEditMode=function(e){e?n.setState({editMode:e}):n.updateContent((function(){return n.setState({editMode:e})}))},n.renderContent=function(){return n.state.editMode?r.a.createElement(p.a,{style:{width:"100%",marginRight:10},defaultValue:n.props.item.content,id:n.state.noteContentId,autoFocus:!0,required:!0,componentClass:"textarea",rows:30}):r.a.createElement("div",null,n.props.item.content)},n.state={editMode:!1,loading:!1,noteContentId:"note-content-input"},n}return Object(ne.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex"}},this.renderContent(),r.a.createElement(Ae,{hide:!1,editMode:this.state.editMode,loading:this.state.loading,setEditMode:this.setEditMode,tooltipText:"Edit"}))}}]),a}(r.a.Component);function Ae(e){if(e.hide)return null;return e.editMode?r.a.createElement(W.a,{onClick:function(){return e.setEditMode(!1)},loading:e.loading,size:"xs"},"Done"):r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,e.tooltipText),placement:"top"},r.a.createElement(O.a,{onClick:function(){return e.setEditMode(!0)},icon:r.a.createElement(h.a,{icon:"edit2"}),size:"xs"}))}var Me=ke,Le=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).close=function(){n.props.switchShowNewItemForm()},n.setLoading=function(e){n.setState({loading:e})},n.addNewItem=function(){var e,t;n.setLoading(!0),n.props.item?e=n.props.item:""===(e=document.getElementById(n.state.newItemUrlId).value)&&(e=null),t="Note"===n.props.inputType?document.getElementById(n.state.newItemNotesId).value:null;var a=n.props.newItemData,r={url:e,content:t,x_position:a.x,y_position:a.y,is_note:null!==t};null!==n.props.parentCluster?r.parent_cluster=n.props.parentCluster.id:r.parent_project=n.props.curProject.id,H("/items","POST",r).then((function(e){200===e.status?(Se.a.info("This item already exists in this project."),n.props.switchShowNewItemForm()):201===e.status&&n.props.renderNetwork((function(){Se.a.success("Item added successfully."),n.props.switchShowNewItemForm()}))}))},n.state={newItemUrlId:"new-item-url",newItemNotesId:"new-item-notes",loading:!1},n}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showNewItemForm!==this.props.showNewItemForm&&this.props.showNewItemForm&&this.setLoading(!1)}},{key:"render",value:function(){return this.props.showNewItemForm?("URL"===this.props.inputType?e=r.a.createElement(p.a,{autoFocus:!0,required:!0,type:"URL",id:this.state.newItemUrlId,placeholder:"Add URL"}):"Note"===this.props.inputType&&this.props.item?e=r.a.createElement(p.a,{autoFocus:!0,type:"Note",required:!0,id:this.state.newItemNotesId,placeholder:"Add Note",componentClass:"textarea",rows:30}):"Note"!==this.props.inputType||this.props.item||(e=r.a.createElement("div",null,r.a.createElement(p.a,{autoFocus:!0,type:"URL",id:this.state.newItemUrlId,placeholder:"Add optional URL"}),r.a.createElement(p.a,{type:"Note",required:!0,id:this.state.newItemNotesId,placeholder:"Add Note",componentClass:"textarea",rows:30}))),r.a.createElement(R.a,{show:!0,onHide:this.close},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Insert the ",this.props.inputType," you'd like to add.")),r.a.createElement(V.a,{onSubmit:this.addNewItem},r.a.createElement(R.a.Body,null,e),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Add Item"))))):null;var e}}]),a}(r.a.Component),_e=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).close=function(){n.props.switchShowNewClusterForm()},n.setLoading=function(e){n.setState({loading:e})},n.addNewCluster=function(){n.setLoading(!0);var e=n.props.newClusterIds.item1,t=n.props.newClusterIds.item2,a=document.getElementById(n.state.newClusterNameId).value,r=n.props.stationaryClusterItemData,o=r.x,s=r.y;H("/clusters","POST",{item1_id:e,item2_id:t,x_position:o,y_position:s,name:a}).then((function(e){var t=function(){n.props.switchShowNewClusterForm(),n.props.disableEditMode()};201===e.status?n.props.renderNetwork((function(){t(),Se.a.success("Cluster created successfully")})):(t(),Se.a.error("Something went wrong"))}))},n.state={newClusterNameId:"new-cluster-name",loading:!1},n}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showNewClusterForm!==this.props.showNewClusterForm&&this.props.showNewClusterForm&&this.setLoading(!1)}},{key:"render",value:function(){return this.props.showNewClusterForm?r.a.createElement(R.a,{show:!0,onHide:this.close,style:Be},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Enter the name of the cluster you'd like to create")),r.a.createElement(V.a,{onSubmit:this.addNewCluster},r.a.createElement(R.a.Body,null,r.a.createElement(p.a,{autoFocus:!0,type:"text",required:!0,id:this.state.newClusterNameId,placeholder:"New Cluster Name"})),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Add Cluster")))):null}}]),a}(r.a.Component),Be={position:"fixed",top:"50%",left:"50%",marginTop:"-96px",marginLeft:"-300px"},He=_e,Re=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).newItemButton=function(){return r.a.createElement(D,null)},e}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"footer"},r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Fit To Screen"),placement:"topStart"},r.a.createElement(O.a,{className:"footer-btn",appearance:"primary",icon:r.a.createElement(h.a,{icon:"arrows-alt"}),circle:!0,size:"lg",onClick:this.props.fit})),r.a.createElement(w.a,{style:{marginRight:15},trigger:["click","hover"],placement:"topEnd",renderTitle:this.newItemButton},r.a.createElement(w.a.Item,{onClick:function(){return Se.a.warning("Feature coming soon...")}},r.a.createElement(h.a,{icon:"file-o"})," Add File"),r.a.createElement(w.a.Item,{onClick:function(){return e.props.setAddItemMode("URL")}},r.a.createElement(h.a,{icon:"globe2"})," Add Web Page"),r.a.createElement(w.a.Item,{onClick:function(){return e.props.setAddItemMode("Note")}},r.a.createElement(h.a,{icon:"edit"})," Add Notes")))}}]),a}(r.a.Component),Ve=a(284),Ue=a(493),ze=a(105),Qe=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;Object(ae.a)(this,a),(n=t.call(this,e)).setLoading=function(e){n.setState({loading:e})},n.getBibSources=function(e){if(null===n.props.curProject||!n.props.showBib)return null;n.setLoading(!0);var t="/projects/"+n.props.curProject.id+"/sources";H(t).then((function(t){n.setState({sources:t.body.sources},(function(){n.setLoading(!1),"function"===typeof e&&e()}))}))},n.copyBib=function(){for(var e=document.getElementsByClassName("copyText"),t="",a=0;a<e.length;a++)t=(t=t.concat(e[a].innerHTML)).concat("<br><br>");function n(e){e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",t),e.preventDefault()}document.addEventListener("copy",n),document.execCommand("copy"),document.removeEventListener("copy",n),Se.a.info("Copied Citations to Clipboard")},n.showMissingIcon=function(e){if(e.title&&e.url&&e.author&&e.published_date&&e.site_name&&e.access_date)return null;var t=["title, ","URL, ","author, ","publish date, ","site name, ","access date, "],a="";return e.title||(a=a.concat(t[0])),e.url||(a=a.concat(t[1])),e.author||(a=a.concat(t[2])),e.published_date||(a=a.concat(t[3])),e.site_name||(a=a.concat(t[4])),e.access_date||(a=a.concat(t[5])),a=a.substring(0,a.length-2),r.a.createElement(se.a,{placement:"top",trigger:"hover",speaker:r.a.createElement(le.a,null,"This citation is missing the ",r.a.createElement("i",null,a," "),"field(s)")},r.a.createElement(h.a,{icon:"exclamation-circle",style:{color:"#f5a623"}}))},n.changeInclusion=function(e,t,a){e.stopPropagation();var r="/sources/"+a.id;H(r,"PATCH",{is_included:t});var o=n.state.sources,s=o.findIndex((function(e){return e.id===a.id}));o[s].is_included=t,n.setState({sources:o})},n.renderAPADate=function(e){var t=n.state.months,a="(";return a=(a=(a=a+e.getFullYear()+", ")+t[e.getMonth()]+" ")+(e.getDate()+1)+"). "},n.renderChicagoDate=function(e){var t=n.state.months[e.getMonth()]+" ";return t=(t=t+(e.getDate()+1)+", ")+e.getFullYear()+"."},n.renderMLADate=function(e){var t=n.state.months,a=e.getDate()+1+" ";return a=(a=a+t[e.getMonth()]+" ")+e.getFullYear()+"."},n.renderAPACitation=function(e){var t="",a="",o="",s=new Date(e.published_date),l=new Date(e.access_date);return e.published_date?t=n.renderAPADate(s):e.access_date&&(t=n.renderAPADate(l)),e.title&&(a=a+e.title+"."),e.author&&(o=o+e.author+"."),r.a.createElement("p",{className:n.isIncludedClassName(e.is_included)},o," ",t,r.a.createElement("i",null,a)," ",e.site_name,". ",r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url,"."))},n.renderChicagoCitation=function(e){var t="",a="",o="",s=new Date(e.published_date),l=new Date(e.access_date);return e.published_date?t=n.renderChicagoDate(s):e.access_date&&(t=n.renderChicagoDate(l)),e.title&&(a=a+'"'+e.title+'."'),e.author&&(o=o+e.author+"."),r.a.createElement("p",{className:n.isIncludedClassName(e.is_included)},o," ",a,r.a.createElement("i",null,e.site_name),", ",t," ",r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url,"."))},n.renderMLACitation=function(e){var t="",a="",o="",s="",l=new Date(e.published_date),i=new Date(e.access_date);return e.published_date&&(t=n.renderMLADate(l)),e.access_date&&(a="Accessed "+n.renderMLADate(i)),e.title&&(o=o+'"'+e.title+'."'),e.author&&(s=s+e.author+"."),r.a.createElement("p",{className:n.isIncludedClassName(e.is_included)},s," ",o,r.a.createElement("i",null,e.site_name),", ",t," ",r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"}," ",e.url,".")," ",a)},n.renderFormatType=function(e){var t=null;return n.state.curFormat===n.state.formats.APA?t=n.renderAPACitation(e):n.state.curFormat===n.state.formats.CHI?t=n.renderChicagoCitation(e):n.state.curFormat===n.state.formats.MLA&&(t=n.renderMLACitation(e)),t},n.isIncludedClassName=function(e){return e?"copyText":void 0},n.setEditSource=function(e){n.setState({editSource:e})},n.changeFormatType=function(e){n.setState({curFormat:e})},n.renderCitations=function(e){return n.state.sources.map((function(t,a){return t.is_included===e?r.a.createElement(ie.a,{defaultChecked:e,style:e?null:{color:"#d3d3d3"},onChange:function(e,a,r){return n.changeInclusion(r,a,t)},key:a},r.a.createElement(E.a,{align:"middle",justify:"space-between"},r.a.createElement(ze.a,null,n.renderFormatType(t)),r.a.createElement(ze.a,null,r.a.createElement(Ge,{source:t,setEditSource:n.setEditSource}),n.showMissingIcon(t)))):null}))},n.renderBibBody=function(){return n.state.loading?r.a.createElement(he.a.Paragraph,{rows:4,active:!0}):r.a.createElement(ce.a,{name:"checkboxList"},n.renderCitations(!0),r.a.createElement($.a,null),n.renderCitations(!1))};var o={APA:"APA Reference List",MLA:"MLA Works Cited",CHI:"Chicago Bibliography Style"};return n.state={sources:null,curFormat:o.APA,formats:o,months:["January","February","March","April","May","June","July","August","September","October","November","December"],editSource:null,loading:!1},n}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.showBib!==this.props.showBib&&this.props.showBib&&this.getBibSources()}},{key:"componentDidMount",value:function(){this.getBibSources()}},{key:"render",value:function(){var e=this,t=this.state.formats,a=[{value:t.APA,label:t.APA},{value:t.MLA,label:t.MLA},{value:t.CHI,label:t.CHI}];return null!==this.state.sources||this.state.loading?r.a.createElement(R.a,{full:!0,show:this.props.showBib,onHide:function(){return e.props.setShowBib(!1)}},r.a.createElement(R.a.Header,{style:{marginRight:"5%"}},r.a.createElement(R.a.Title,null,r.a.createElement("span",{style:{marginRight:5}},"Bibliography"),r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Copy to Clipboard"),placement:"top"},r.a.createElement(O.a,{onClick:this.copyBib,icon:r.a.createElement(h.a,{icon:"copy"}),size:"sm"})),r.a.createElement(Ve.a,{defaultValue:this.state.curFormat?this.state.curFormat:t.APA,data:a,onChange:this.changeFormatType,style:{float:"right"},cleanable:!1,searchable:!1}))),r.a.createElement(R.a.Body,null,this.renderBibBody()),r.a.createElement(We,{close:function(){return e.setEditSource(null)},source:this.state.editSource,getBibSources:this.getBibSources})):null}}]),a}(r.a.Component),Ge=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){return Object(ae.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Edit Citation Fields"),placement:"top"},r.a.createElement(O.a,{icon:r.a.createElement(h.a,{icon:"edit2"}),size:"xs",onClick:function(){return e.props.setEditSource(e.props.source)}}))}}]),a}(r.a.Component),We=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).setFormValue=function(e){n.setState({formValue:e})},n.setLoading=function(e){n.setState({loading:e})},n.showField=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=a?null:"";if(!e)return n;var r=e[t];return r?a?new Date(r):r:n},n.saveInfo=Object(F.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoading(!0),t="/sources/"+n.props.source.id,a={author:n.state.formValue.author,title:n.state.formValue.title,published_date:n.state.formValue.publishDate,site_name:n.state.formValue.siteName,access_date:n.state.formValue.accessDate,url:n.state.formValue.url},e.next=5,H(t,"PATCH",a);case 5:n.props.getBibSources((function(){n.props.close(),n.setLoading(!1)}));case 6:case"end":return e.stop()}}),e)}))),n.state={loading:!1,formValue:{author:n.showField(e.source,"author"),title:n.showField(e.source,"title"),publishDate:n.showField(e.source,"published_date",!0),siteName:n.showField(e.source,"site_name"),accessDate:n.showField(e.source,"access_date",!0),url:n.showField(e.source,"url")}},n}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.source!==this.props.source&&this.setFormValue({author:this.showField(this.props.source,"author"),title:this.showField(this.props.source,"title"),publishDate:this.showField(this.props.source,"published_date",!0),siteName:this.showField(this.props.source,"site_name"),accessDate:this.showField(this.props.source,"access_date",!0),url:this.showField(this.props.source,"url")})}},{key:"render",value:function(){if(null===this.props.source)return null;return r.a.createElement(R.a,{size:"sm",show:!0,onHide:this.props.close},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Edit Citation Fields")),r.a.createElement(R.a.Body,null,r.a.createElement(V.a,{layout:"horizontal",onChange:this.setFormValue,formValue:this.state.formValue},r.a.createElement(U.a,null,r.a.createElement(z.a,null,"Author"),r.a.createElement(Q.a,{name:"author"})),r.a.createElement(U.a,null,r.a.createElement(z.a,null,"Title"),r.a.createElement(Q.a,{name:"title"})),r.a.createElement(U.a,null,r.a.createElement(z.a,null,"Publish Date"),r.a.createElement(Q.a,{name:"publishDate",accepter:Ue.a,format:"MM-DD-YYYY",oneTap:!0})),r.a.createElement(U.a,null,r.a.createElement(z.a,null,"Site Name"),r.a.createElement(Q.a,{name:"siteName"})),r.a.createElement(U.a,null,r.a.createElement(z.a,null,"Access Date"),r.a.createElement(Q.a,{name:"accessDate",accepter:Ue.a,format:"MM-DD-YYYY",oneTap:!0})),r.a.createElement(U.a,null,r.a.createElement(z.a,null,"URL"),r.a.createElement(Q.a,{name:"url"})))),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{onClick:this.saveInfo,loading:this.state.loading},"Save")))}}]),a}(r.a.Component),Ke=Qe,Je=a(492),Ye=Je.a.Column,qe=Je.a.HeaderCell,Ze=Je.a.Cell,Xe=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).saveUser=Object(F.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoading(!0),t=document.getElementById(n.state.userInputId).value.trim(),a={shared_proj:n.props.curProject.id,email:t,role:"Collaborator"},"/shared_projects",e.next=6,H("/shared_projects","POST",a);case 6:n.props.updateProjects();case 7:case"end":return e.stop()}}),e)}))),n.setLoading=function(e){n.setState({loading:e})},n.state={userInputId:"user-input-id",loading:!1},n}return Object(ne.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e.curProject!==this.props.curProject&&this.props.showSharedProject&&this.setLoading(!1)}},{key:"render",value:function(){var e=this;return null===this.props.curProject?null:r.a.createElement(R.a,{show:this.props.showSharedProject,onHide:function(){return e.props.setShowSharedProject(!1)}},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Shared settings for ",this.props.curProject.title)),r.a.createElement(V.a,{onSubmit:this.saveUser},r.a.createElement(R.a.Body,null,r.a.createElement(Je.a,{data:this.props.curProject.shared_users},r.a.createElement(Ye,{width:200,fixed:!0},r.a.createElement(qe,null,"Name"),r.a.createElement(Ze,{dataKey:"name"})),r.a.createElement(Ye,{width:200},r.a.createElement(qe,null,"Email"),r.a.createElement(Ze,{dataKey:"email"})),r.a.createElement(Ye,{width:200},r.a.createElement(qe,null,"Role"),r.a.createElement(Ze,{dataKey:"role"}))),r.a.createElement(p.a,{style:{marginRight:10},placeholder:"Type email you want to share project with",id:this.state.userInputId,autoFocus:!0,required:!0,componentClass:"textarea",rows:30})),r.a.createElement(R.a.Footer,null,r.a.createElement(W.a,{type:"submit",loading:this.state.loading,appearance:"primary"},"Save"))))}}]),a}(r.a.Component),$e=a(84),et=a(499),tt=function(e,t){for(var a=e,n=a.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),o=[a[r],a[n]];a[n]=o[0],a[r]=o[1]}return a.slice(0,t)},at=et.a.Line,nt=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).getRandomItems=function(){return tt(n.props.items,4)},n.updateRandomItems=function(){n.setState({randomItems:n.getRandomItems(),show:!n.state.show}),console.log("show is false"),console.log(n.state.show)},n.chooseItem=function(e){n.setState({numPlayed:n.state.numPlayed+1,selectedItems:[].concat(Object($e.a)(n.state.selectedItems),[e]),show:!n.state.show},n.updateRandomItems),console.log("animation should show"),console.log(n.state.show)},n.generateDisplayValue=function(e){return e.title?e.title:e.content},n.state={randomItems:n.getRandomItems(),numPlayed:0,selectedItems:[],show:!0},n}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return this.state.numPlayed<this.props.numRounds?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"OddOnesOut"),r.a.createElement("h3",null,"Round ",this.state.numPlayed+1),r.a.createElement(at,{percent:this.state.numPlayed/5*100,status:"active"}),r.a.createElement("h5",null,"Select the odd one out!"),this.state.randomItems.map((function(t,a){return r.a.createElement(W.a,{block:!0,key:a,appearance:"primary",color:"blue",style:{margin:20,display:"block"},onClick:function(){return e.chooseItem(t)}},e.generateDisplayValue(t))}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"OddOnesOut"),r.a.createElement("h3",null,"Well Done!"),r.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),r.a.createElement("h5",null,"Here are your selected items:"),this.state.selectedItems.map((function(t,a){return r.a.createElement(W.a,{block:!0,key:a,appearance:"primary",color:"blue",style:{margin:20,display:"block"}},e.generateDisplayValue(t))})))}}]),a}(r.a.Component),rt=et.a.Line,ot=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).getRandomItems=function(){return tt(n.props.items,2)},n.updateRandomItems=function(){n.setState({randomItems:n.getRandomItems()})},n.submitCommon=function(){var e=document.getElementById(n.state.commonId);n.setState({numPlayed:n.state.numPlayed+1,commonality:[].concat(Object($e.a)(n.state.commonality),[e.value])},n.updateRandomItems),e.value=""},n.state={randomItems:n.getRandomItems(),numPlayed:0,commonality:[],commonId:"common-Id"},n}return Object(ne.a)(a,[{key:"render",value:function(){return console.log(this.state),this.state.numPlayed<this.props.numRounds?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"What comes to mind?"),r.a.createElement("h3",null,"Round ",this.state.numPlayed+1),r.a.createElement(rt,{percent:this.state.numPlayed/5*100,status:"active"}),r.a.createElement("h5",null,"What is the commonality between the following?"),this.state.randomItems.map((function(e,t){return r.a.createElement(W.a,{block:!0,key:t,appearance:"primary",color:"blue",style:{margin:20,display:"block"}},e.title)})),r.a.createElement(V.a,{onSubmit:this.submitCommon},r.a.createElement(p.a,{autoFocus:!0,type:"text",required:!0,componentClass:"textarea",id:this.state.commonId,rows:5,placeholder:"Write your thoughts here..."}),r.a.createElement(W.a,{appearance:"primary",color:"blue",style:{margin:20,display:"block"},type:"submit"},"Next"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"What comes to mind?"),r.a.createElement("h3",null,"Well Done!"),r.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),r.a.createElement("h5",null,"Here are the common themes you have identified:"),r.a.createElement("ul",null,this.state.commonality.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))}}]),a}(r.a.Component),st=et.a.Line,lt=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).renderNetwork=function(e){if(null!==n.props.curProject){var t=n.createNodesAndEdges(),a=Object(c.a)(t,2),r=a[0],o=a[1],s=document.getElementById("MakePairs"),l={nodes:r,edges:o},i={nodes:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},color:{background:getComputedStyle(document.querySelector(".rs-btn-primary"))["background-color"]},widthConstraint:{maximum:500}},edges:{color:"black",physics:!1,smooth:!1,hoverWidth:0},interaction:{selectConnectedEdges:!1,hover:!0,hoverConnectedEdges:!1},manipulation:{enabled:!1,addEdge:n.addEdgeConnection}};console.log("container",s,"data",l);var u=new Ne.b(s,l,i);u.fit(),u.on("click",(function(e){if(void 0!==e.nodes&&e.nodes.length>0){var t=e.nodes[0];null===n.state.from_id||n.state.from_id===t?n.setState({from_id:t}):(n.addEdgeConnection(n.state.from_id,t),n.setState({from_id:null}))}})),u.on("hoverNode",(function(){return u.canvas.body.container.style.cursor="pointer"})),u.on("blurNode",(function(){return u.canvas.body.container.style.cursor="default"})),n.setState({network:u},e)}},n.addEdgeConnection=function(e,t){n.state.network.body.data.edges.add([{from:e,to:t}]);var a=n.state.network.body.data.nodes.get(e).label,r=n.state.network.body.data.nodes.get(t).label;n.setState({connections:[].concat(Object($e.a)(n.state.connections),[{from:a,to:r}])})},n.getRandomItems=function(){return tt(n.props.items,4)},n.updateRandomItems=function(){n.setState({randomItems:n.getRandomItems()})},n.submitItems=function(){console.log("network",n.state.network),n.setState({numPlayed:n.state.numPlayed+1},n.updateRandomItems),n.state.numPlayed<n.props.numRounds&&n.renderNetwork()},n.state={randomItems:n.getRandomItems(),numPlayed:0,connections:[],network:null,visNodes:null,visEdges:null,selectedNode:null,items:null,loading:!1},console.log("numRounds",n.props.numRounds),n}return Object(ne.a)(a,[{key:"createNodesAndEdges",value:function(){var e=new Ne.a,t=new Ne.a;for(var a in this.state.randomItems){var n=this.state.randomItems[a],r=a%2?0:500,o=a<2?0:200;e.add({id:n.id,label:n.title,x:r,y:o})}return this.setState({visNodes:e,visEdges:t}),[e,t]}},{key:"componentDidMount",value:function(){this.renderNetwork()}},{key:"render",value:function(){return console.log(this.state),this.state.numPlayed<this.props.numRounds?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Make Pairs"),r.a.createElement("h3",null,"Round ",this.state.numPlayed+1),r.a.createElement(st,{percent:this.state.numPlayed/5*100,status:"active"}),r.a.createElement("div",{id:"MakePairs",style:{height:480}}),r.a.createElement(V.a,{onSubmit:this.submitItems},r.a.createElement(W.a,{appearance:"primary",color:"blue",style:{margin:20,display:"block"},type:"submit"},"Next"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Make Pairs"),r.a.createElement("h3",null,"Well Done!"),r.a.createElement("h5",null,"Hope you found some inspirations to explore more!"),r.a.createElement("h5",null,"Here are the connections you have identified:"),this.state.connections.slice(1,this.state.connections.length).map((function(e,t){return[r.a.createElement(W.a,{key:t,appearance:"primary",color:"blue",style:{margin:20}},e.from),r.a.createElement($.a,{key:t+50},"is related to"),r.a.createElement(W.a,{key:t+100,appearance:"primary",color:"blue",style:{margin:20}},e.to),r.a.createElement($.a,{key:t+200})]})))}}]),a}(r.a.Component),it=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){return Object(ae.a)(this,a),t.apply(this,arguments)}return Object(ne.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.sources?null:r.a.createElement("div",{id:"GameWindow"},r.a.createElement(R.a,{full:!0,show:this.props.showGame,onHide:function(){return e.props.setShowGame(!1)}},r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"MiniGames")),r.a.createElement(R.a.Body,null,this.props.selectedGame)))}}]),a}(r.a.Component),ct=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).randomizer=function(){n.setState({selectedGame:n.state.games[Math.floor(Math.random()*n.state.games.length)],numRounds:Math.ceil(6*Math.random())})},n.updateGames=function(){console.log("num items",n.props.items.length);var e=[];e.push(r.a.createElement(nt,{items:n.props.items,numRounds:n.state.numRounds})),e.push(r.a.createElement(ot,{items:n.props.items,numRounds:n.state.numRounds})),n.props.items.length>4&&e.push(r.a.createElement(lt,{items:n.props.items,numRounds:n.state.numRounds})),n.setState({games:e},n.randomizer)},n.setShowGame=function(e){n.props.network&&n.setState({showGame:e})},n.handleClick=function(){n.setShowGame(!0),n.updateGames()},n.state={loading:!1,selectedGame:null,numRounds:5},n}return Object(ne.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(it,{showGame:this.state.showGame,setShowGame:this.setShowGame,items:this.props.items,selectedGame:this.state.selectedGame}),r.a.createElement(se.a,{preventOverflow:!0,trigger:"hover",speaker:r.a.createElement(le.a,null,"Minigames"),placement:"topEnd"},r.a.createElement(O.a,{appearance:"primary",icon:r.a.createElement(h.a,{icon:"gamepad"}),circle:!0,size:"lg",onClick:this.handleClick,style:{top:"50%",position:"absolute",right:5,zIndex:1}})))}}]),a}(r.a.Component),ut=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(){var e;Object(ae.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).buttonAction=function(){if(null===e.props.curClusterView.parent_cluster)e.props.setCurClusterView(null);else{var t="/clusters/"+e.props.curClusterView.parent_cluster;H(t).then((function(t){e.props.setCurClusterView(t.body.cluster)}))}},e}return Object(ne.a)(a,[{key:"render",value:function(){return null===this.props.curClusterView?null:r.a.createElement("div",{style:{display:"block",width:"100px",height:"100px",borderStyle:"solid",borderWidth:"0 0 150px 150px",borderColor:"transparent transparent transparent #3498FF",position:"fixed",top:55,left:0,zIndex:99999,color:"white",cursor:"pointer"},onClick:this.buttonAction},r.a.createElement("span",{style:{position:"absolute",top:"30px",width:"80px",left:"-140px",fontFamily:"Apple-System",transform:"rotate(-45deg)",color:"white",textAlign:"center",display:"block",userSelect:"none"}},"To previous level"))}}]),a}(r.a.Component);function dt(e,t){return e.left<t.right&&e.right>t.left&&e.bottom>t.top&&e.top<t.bottom}var mt=function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n,r;Object(ae.a)(this,a),(r=t.call(this,e)).generateVisClusterId=function(e){return"c"+e.id},r.generateClusterIdFromVisId=function(e){return parseInt(e.substring(e.indexOf("c")+1))},r.generateVisInClusterId=function(e,t,a){var n,r="c"+e.id;return"item"===t?n="i"+a.id:"title"===t?n="t":"count"===t&&(n="n"),r+n},r.generateClusterIdAndNodeIdFromVisInClusterId=function(e){var t,a=e.indexOf("i");return a>=0?t=parseInt(e.substring(a+1)):-1===(a=e.indexOf("t"))&&(a=e.indexOf("n")),[parseInt(e.substring(e.indexOf("c")+1,a)),t]},r.isItem=function(e){var t=r.state.visNodes.get(e);return!!t&&"items"===t.group},r.isCluster=function(e){var t=r.state.visNodes.get(e);return!!t&&"clusters"===t.group},r.isItemInCluster=function(e){var t=r.state.visNodes.get(e);return!!t&&"inCluster"===t.group},r.setSelectedItem=function(e){r.setState({selectedItem:e})},r.getSelectedItemDetails=Object(F.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/items/"+r.state.selectedItem.id,e.next=3,H(t);case 3:a=e.sent,r.setSelectedItem(a.body.item);case 5:case"end":return e.stop()}}),e)}))),r.setNonSelectedNodes=function(e,t){r.setState({nonSelectedNodes:t.getIds().filter((function(t){return t!==e}))})},r.handleClickedNode=function(e){r.setSelectedItem(r.state.items.find((function(t){return t.id===e})))},r.handleClickedCluster=function(e){r.setCurClusterView(r.state.clusters.find((function(t){return t.id===e})))},r.setCurClusterView=function(e){r.setState({curClusterView:e})},r.handleDragStart=function(e,t,a){var n=r.isCluster(e),o=r.isItemInCluster(e);if(n||o){var s,l;n?(s=r.state.clusters.find((function(t){return t.id===r.generateClusterIdFromVisId(e)})),l=e):(s=r.state.clusters.find((function(t){return t.id===r.generateClusterIdAndNodeIdFromVisInClusterId(e)[0]})),l=r.generateVisClusterId(s));var i=s.child_items.slice(0,2).map((function(e){return r.generateVisInClusterId(s,"item",e)})),c=r.generateVisInClusterId(s,"title"),u=i.concat([l,c]);if(s.child_items.length>2){var d=r.generateVisInClusterId(s,"count");u.push(d)}a.selectNodes(u)}else r.setNonSelectedNodes(e,t)},r.setLoading=function(e){r.setState({loading:e})},r.getItems=function(){var e=Object(F.a)(x.a.mark((function e(t){var a,n,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r.props.curProject){e.next=2;break}return e.abrupt("return",null);case 2:if(r.setLoading(!0),0!==r.props.filters.length){e.next=7;break}return r.setLoading(!1),r.setState({items:[]},t),e.abrupt("return");case 7:if(null!==r.state.curClusterView){e.next=17;break}return a="/projects/"+r.props.curProject.id+"/items",""!==r.props.searchQuery&&0!==r.props.filters.length&&(a=_(a,r.props.searchQuery,r.props.filters)),e.next=12,H(a);case 12:n=e.sent,r.setLoading(!1),r.setState({items:n.body.items},t),e.next=23;break;case 17:return o="/clusters/"+r.state.curClusterView.id,e.next=20,H(o);case 20:s=e.sent,r.setLoading(!1),r.setState({items:s.body.cluster.child_items},t);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getClusters=function(){var e=Object(F.a)(x.a.mark((function e(t){var a,n,o,s,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r.props.curProject){e.next=2;break}return e.abrupt("return",null);case 2:if(r.setLoading(!0),null!=r.state.curClusterView){e.next=12;break}return a="/projects/"+r.props.curProject.id+"/clusters",e.next=7,H(a);case 7:n=e.sent,r.setLoading(!1),r.setState({clusters:n.body.clusters},t),e.next=18;break;case 12:return o="/clusters/"+r.state.curClusterView.id,e.next=15,H(o);case 15:s=e.sent,l=s.body.cluster.child_clusters.map((function(e){return H("/clusters/"+e)})),Promise.all(l).then((function(e){r.setLoading(!1),r.setState({clusters:e.map((function(e){return e.body.cluster}))},t)}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.updateItemPosition=function(e,t,a){H("/items/"+e,"PATCH",{x_position:t,y_position:a}).then()},r.updateClusterPosition=function(e,t,a){H("/clusters/"+e,"PATCH",{x:t,y:a}).then()},r.fitNetworkToScreen=function(){null!==r.state.network&&r.state.network.fit()},r.disableEditMode=function(){r.setShowNewItemHelperMessage(!1),r.setShowNewClusterHelperMessage(!1),r.state.network&&r.state.network.disableEditMode()},r.switchShowNewItemForm=function(){r.setState({showNewItemForm:!r.state.showNewItemForm},(function(){r.state.showNewItemForm||r.disableEditMode()}))},r.switchShowNewClusterForm=function(){r.setState({showNewClusterForm:!r.state.showNewClusterForm},(function(){r.state.showNewClusterForm||r.disableEditMode()}))},r.setShowNewItemHelperMessage=function(e){r.setState({showNewItemHelperMessage:e})},r.addItem=function(e,t){r.switchShowNewItemForm(),r.setShowNewItemHelperMessage(!1),r.setState({newItemData:e})},r.setShowNewClusterHelperMessage=function(e){r.setState({showNewClusterHelperMessage:e})},r.setShowAddToClusterHelperMessage=function(e){r.setState({showAddToClusterHelperMessage:e})},r.setAddItemMode=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r.setState({newItemFormType:e,item:t}),r.setShowNewItemHelperMessage(!0),r.state.network&&r.state.network.addNodeMode()},r.addItemToCluster=function(e,t){r.setLoading(!0),H("/clusters/"+e+"/items/"+t,"POST").then((function(e){r.setLoading(!1),e.body.success?Se.a.success("This item was successfully added"):Se.a.error("This item could not be added"),r.renderNetwork()}))},r.getNodeType=function(e){return e?e.url?e.url&&e.is_note&&e.content?r.state.types.SOURCEANDNOTE:e.url&&!e.is_note&&e.content?r.state.types.SOURCEANDHIGHLIGHT:e.url&&!e.content?r.state.types.PURESOURCE:void 0:r.state.types.PURENOTE:r.state.types.NULL},r.getNodeLabel=function(e,t){var a,n=r.state.types;return e.content&&(a=e.content).length>100&&(a=a.substring(0,100)+"..."),t===n.PURESOURCE?e.title:t===n.SOURCEANDNOTE||t===n.SOURCEANDHIGHLIGHT?e.title+"\n"+a:t===n.PURENOTE?a:void 0},r.getNodePosition=function(e){var t=e.x_position,a=e.y_position;if(null===t||null===a){var n=r.generateNodePositions(e),o=Object(c.a)(n,2);t=o[0],a=o[1],r.updateItemPosition(e.id,t,a)}return[t,a]},r.getColor=function(e){var t=r.getNodeType(e);return r.state.nodeColors[t]},r.renderNetwork=function(e){null!==r.props.curProject&&r.getItems((function(){r.getClusters((function(){var t=r.createNodes();r.createClusters().forEach((function(e){t.add(e)})),console.log("nodes",t.get());var a=document.getElementById("mindmap"),n={nodes:t},o={groups:{clusters:{chosen:{label:function(e,t,a,n){e.color="#ffffff00"},node:function(e,t,a,n){e.color="#ffffff00"}},shape:"circle",font:{face:"Apple-System",color:"#ffffff00"},color:{border:"#00c0de",background:"#ffffff00"},physics:!1},items:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},widthConstraint:{maximum:500}},inCluster:{shape:"box",size:16,margin:10,physics:!1,chosen:!1,font:{face:"Apple-System",color:"white"},widthConstraint:{maximum:500}}},interaction:{selectConnectedEdges:!1,hover:!0,hoverConnectedEdges:!1},manipulation:{enabled:!1,addNode:r.addItem}},s=new Ne.b(a,n,o);s.fit(),s.on("click",(function(e){if(void 0!==e.nodes&&e.nodes.length>0){var t=e.nodes[0];if(r.isItem(t))r.handleClickedNode(t);else if(r.isCluster(t)||r.isItemInCluster(t)){var a;a=r.isItemInCluster(t)?r.generateClusterIdAndNodeIdFromVisInClusterId(t)[0]:r.generateClusterIdFromVisId(t),r.handleClickedCluster(a)}}})),s.on("dragStart",(function(e){if(void 0!==e.nodes&&e.nodes.length>0){var a=e.nodes[0];r.handleDragStart(a,t,s)}}));s.on("dragging",function(e,t){var a,n;return function(){var r=this,o=arguments;n?(clearTimeout(a),a=setTimeout((function(){Date.now()-n>=t&&(e.apply(r,o),n=Date.now())}),t-(Date.now()-n))):(e.apply(r,o),n=Date.now())}}((function(e){if(void 0!==e.nodes&&e.nodes.length>0){var t=s.getSelectedNodes()[0];if(r.isItem(t)){var a=s.getBoundingBox(t),n=r.state.nonSelectedNodes;!r.state.showNewClusterHelperMessage&&!r.state.showAddToClusterHelperMessage&&n.length>=1?n.forEach((function(e){dt(s.getBoundingBox(e),a)&&(r.isItem(e)?(r.setState({stationaryClusterItemData:s.getPosition(e)}),r.setState({newClusterIds:{item1:t,item2:e}}),r.setShowNewClusterHelperMessage(!0)):r.isCluster(e)&&(r.setState({existingClusterId:e}),r.setShowAddToClusterHelperMessage(!0)))})):(r.state.newClusterIds&&!dt(a,s.getBoundingBox(r.state.newClusterIds.item2))&&r.setShowNewClusterHelperMessage(!1),r.state.existingClusterId&&!dt(a,s.getBoundingBox(r.state.existingClusterId))&&r.setShowAddToClusterHelperMessage(!1))}}}),100)),s.on("dragEnd",(function(e){if(0!==s.getSelectedNodes().length)if(r.state.showNewClusterHelperMessage)r.setState({showNewClusterForm:!0});else if(r.state.showAddToClusterHelperMessage){var t=r.state.existingClusterId,a=r.generateClusterIdFromVisId(t);r.addItemToCluster(a,s.getSelectedNodes()[0]),r.setShowAddToClusterHelperMessage(!1),r.renderNetwork()}else{var n=s.getSelectedNodes()[0],o=s.getPosition(n),l=o.x,i=o.y;if(r.isItem(n))r.updateItemPosition(n,l,i);else if(r.isCluster(n)||r.isItemInCluster(n)){var u;if(r.isCluster(n))u=r.generateClusterIdFromVisId(n);else{var d=r.generateClusterIdAndNodeIdFromVisInClusterId(n);u=Object(c.a)(d,1)[0]}r.updateClusterPosition(u,l,i)}}})),s.on("hoverNode",(function(){return s.canvas.body.container.style.cursor="pointer"})),s.on("blurNode",(function(){return s.canvas.body.container.style.cursor="default"})),r.setState({network:s},e)}))}))};var o={NULL:null,URL:"url",NOTES:"notes"},s={NULL:null,PURESOURCE:"pureSource",SOURCEANDNOTE:"sourceAndNote",SOURCEANDHIGHLIGHT:"sourceAndHighlight",PURENOTE:"pureNote",NEITHER:"neither"},l=(n={NULL:null},Object(Ie.a)(n,s.PURESOURCE,"#00c0de"),Object(Ie.a)(n,s.SOURCEANDNOTE,"#f36170"),Object(Ie.a)(n,s.SOURCEANDHIGHLIGHT,"#45c786"),Object(Ie.a)(n,s.PURENOTE,"#f5a94b"),Object(Ie.a)(n,s.NEITHER,"#000000"),n);return r.state={network:null,visNodes:null,selectedItem:null,items:null,nonSelectedNodes:null,clusters:null,loading:!1,showNewItemForm:!1,showNewItemHelperMessage:!1,newItemData:o.NULL,modes:o,newItemFormType:null,item:null,types:s,nodeColors:l,showColor:l.NULL,showNewClusterForm:!1,showNewClusterHelperMessage:!1,showAddToClusterHelperMessage:!1,stationaryClusterItemData:null,newClusterIds:null,existingClusterId:null,curClusterView:JSON.parse(localStorage.getItem("curClusterView"))},r}return Object(ne.a)(a,[{key:"generateNodePositions",value:function(e){return[Math.floor(2*Math.random()*300-300)+0,Math.floor(2*Math.random()*300-300)+0]}},{key:"createNodes",value:function(){var e=this,t=new Ne.a,a=function(a){if(0===e.state.clusters.length||0===e.state.clusters.filter((function(t){return t.project_id===e.props.curProject.id})).filter((function(t){return t.child_items.some((function(t){return t.id===e.state.items[a].id}))})).length){var n=e.state.items[a],r=e.getNodeType(n),o=e.getNodeLabel(n,r),s=e.getNodePosition(n),l=Object(c.a)(s,2),i=l[0],u=l[1];t.add({group:"items",id:n.id,label:o,x:i,y:u,color:e.getColor(n)})}};for(var n in this.state.items)a(n);return this.setState({visNodes:t}),t}},{key:"createClusters",value:function(){var e=this,t=new Ne.a;if(0===this.state.clusters.length)return t;var a=this.state.clusters;return console.log("ok",this.state.items),a.forEach((function(a){console.log(a),t.add({group:"clusters",id:e.generateVisClusterId(a),label:"-----------------------------------------------------",x:a.x_position,y:a.y_position});if(t.add({group:"inCluster",id:e.generateVisInClusterId(a,"title"),label:a.name,x:a.x_position,y:a.y_position-120,font:{color:"black",size:18},color:{background:"#ffffff",border:"#00c0de"}}),a.child_items.length>2){var n=a.child_items.length-2;t.add({group:"inCluster",id:e.generateVisInClusterId(a,"count"),label:"+"+n+" item"+(n>1?"s":""),x:a.x_position,y:a.y_position+120,font:{color:"black",size:18},color:{background:"rgba(0, 0, 0, 0)",border:"rgba(0, 0, 0, 0)"}})}var r=0;console.log(a.child_items),a.child_items.forEach((function(n){var o=e.getNodeType(n),s=e.getNodeLabel(n,o),l=-40;1===r&&(l=40),r>1||(t.add({group:"inCluster",id:e.generateVisInClusterId(a,"item",n),label:s,x:a.x_position,y:a.y_position+l,widthConstraint:{maximum:170},color:e.getColor(n)}),r++)}))})),t}},{key:"componentDidUpdate",value:function(e,t,a){e.curProject!==this.props.curProject&&this.setState({items:null},this.renderNetwork),t.showNewItemHelperMessage!==this.state.showNewItemHelperMessage&&(this.state.showNewItemHelperMessage?Se.a.info("Click on an empty space to add your new item.",0,this.disableEditMode):Se.a.close()),e.searchQuery===this.props.searchQuery&&e.filters===this.props.filters||this.renderNetwork(null),t.showNewClusterHelperMessage!==this.state.showNewClusterHelperMessage&&(this.state.showNewClusterHelperMessage?Se.a.info("Release to create new cluster.",0,this.disableEditMode):Se.a.close()),t.showAddToClusterHelperMessage!==this.state.showAddToClusterHelperMessage&&(this.state.showAddToClusterHelperMessage?Se.a.info("Release to add to cluster.",0,this.disableEditMode):Se.a.close()),t.showNewClusterForm!==this.state.showNewClusterForm&&this.state.showNewClusterForm&&Se.a.close(),t.curClusterView!==this.state.curClusterView&&(localStorage.setItem("curClusterView",JSON.stringify(this.state.curClusterView)),this.setState({items:null,clusters:null},this.renderNetwork))}},{key:"componentDidMount",value:function(){null===this.state.curClusterView&&localStorage.setItem("curClusterView",JSON.stringify(null)),this.renderNetwork()}},{key:"render",value:function(){return null===this.props.curProject||this.state.loading&&(null===this.state.items||null===this.state.clusters)?r.a.createElement(J.a,{size:"lg",backdrop:!0,center:!0}):r.a.createElement("div",null,r.a.createElement("div",{id:"mindmap"}),r.a.createElement(ct,{curProject:this.props.curProject,items:this.state.items,network:this.state.network}),r.a.createElement(Me,{selectedItem:this.state.selectedItem,setSelectedItem:this.setSelectedItem,getSelectedItemDetails:this.getSelectedItemDetails,renderNetwork:this.renderNetwork,setAddItemMode:this.setAddItemMode,getNodeType:this.getNodeType,nodeTypes:this.state.types}),r.a.createElement(Le,{showNewItemForm:this.state.showNewItemForm,curProject:this.props.curProject,renderNetwork:this.renderNetwork,switchShowNewItemForm:this.switchShowNewItemForm,inputType:this.state.newItemFormType,newItemData:this.state.newItemData,item:this.state.item,parentCluster:this.state.curClusterView}),r.a.createElement(He,{showNewClusterForm:this.state.showNewClusterForm,stationaryClusterItemData:this.state.stationaryClusterItemData,curProject:this.props.curProject,renderNetwork:this.renderNetwork,newClusterIds:this.state.newClusterIds,switchShowNewClusterForm:this.switchShowNewClusterForm,disableEditMode:this.disableEditMode}),r.a.createElement(Ke,{showBib:this.props.showBib,setShowBib:this.props.setShowBib,curProject:this.props.curProject}),r.a.createElement(Xe,{showSharedProject:this.props.showSharedProject,setShowSharedProject:this.props.setShowSharedProject,curProject:this.props.curProject,updateProjects:this.props.updateProjects}),r.a.createElement(ut,{curClusterView:this.state.curClusterView,setCurClusterView:this.setCurClusterView}),r.a.createElement(Re,{fit:this.fitNetworkToScreen,setAddItemMode:this.setAddItemMode}))}}]),a}(r.a.Component),pt=(a(478),a(479),function(e){Object(re.a)(a,e);var t=Object(oe.a)(a);function a(e){var n;return Object(ae.a)(this,a),(n=t.call(this,e)).updateProjects=function(e){H("/projects").then((function(t){if(t.body.success){var a=t.body.projects;n.setState({projects:a},(function(){null!==n.state.curProject?n.setCurProject(n.state.curProject.id):a&&a.length>0&&n.setState({curProject:a[0]}),"function"===typeof e&&e()}))}}))},n.switchShowProjectsSidebar=function(){n.setState({showProjectsSidebar:!n.state.showProjectsSidebar})},n.setCurProject=function(e){if(null===e)n.setState({curProject:null});else{var t=n.state.projects.find((function(t){return t.id===e}));n.setState({curProject:t})}},n.projectsButton=function(){return r.a.createElement(W.a,{appearance:"primary",id:"projects-sidebar-btn",onClick:n.switchShowProjectsSidebar},"Your",r.a.createElement("br",null),"Projects")},n.setShowBib=function(e){n.setState({showBib:e})},n.setSearchQuery=function(e){n.setState({searchQuery:e}),n.props.onInput&&n.props.onInput({searchQuery:e})},n.updateFilters=function(e){n.setState({filters:e})},n.setShowSharedProject=function(e){n.setState({showSharedProject:e})},n.state={curProject:JSON.parse(localStorage.getItem("curProject")),projects:null,showProjectsSidebar:!1,showBib:!1,showSharedProject:!1,searchQuery:"",filters:["Title","URL","Page Content","Highlights","Notes"]},n}return Object(ne.a)(a,[{key:"componentDidMount",value:function(){this.updateProjects()}},{key:"componentDidUpdate",value:function(e,t,a){t.curProject!==this.state.curProject&&(null===this.state.curProject&&this.setState({curProject:this.state.projects[0]}),localStorage.setItem("curProject",JSON.stringify(this.state.curProject)))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(pe,{curProject:this.state.curProject,setShowBib:this.setShowBib,searchQuery:this.state.searchQuery,setSearchQuery:this.setSearchQuery,updateFilters:this.updateFilters}),r.a.createElement(je,{show:this.state.showProjectsSidebar,curProject:this.state.curProject,projects:this.state.projects,setShowSharedProject:this.setShowSharedProject,close:this.switchShowProjectsSidebar,updateProjects:this.updateProjects,setCurProject:this.setCurProject}),this.projectsButton(),r.a.createElement(mt,{curProject:this.state.curProject,showBib:this.state.showBib,setShowBib:this.setShowBib,searchQuery:this.state.searchQuery,filters:this.state.filters,setShowSharedProject:this.setShowSharedProject,showSharedProject:this.state.showSharedProject,updateProjects:this.updateProjects}))}}]),a}(r.a.Component)),ht=Object(y.c)(pt,{onRedirecting:function(){return r.a.createElement(J.a,{size:"lg",backdrop:!0,center:!0})}}),ft=function(e){var t=e.children,a=Object(i.f)();return r.a.createElement(y.a,{domain:"knolist.us.auth0.com",clientId:"pBu5uP4mKTQgBttTW13N0wCVgsx90KMi",redirectUri:window.location.origin,onRedirectCallback:function(e){a.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:"knolist"},t)};s.a.render(r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(ft,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(ht,null)),r.a.createElement(i.a,{path:"/my-projects"},r.a.createElement(q,{url:"/my-projects"})),r.a.createElement(i.a,{path:"/shared"},r.a.createElement(q,{url:"/shared"})),r.a.createElement(i.a,{path:"/archived"},r.a.createElement(q,{url:"/archived"})),r.a.createElement(i.a,{path:"/settings"},r.a.createElement(te,null))))),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.f6f3860d.chunk.js.map